import{r,y as Ce,b as m,j as e}from"./index-CZLZpOaH.js";import{C as p}from"./common.constants-BAKO8LyS.js";import{C as R}from"./Container-D9at3elR.js";import{F as o}from"./Form-ExWjSL5Y.js";import{R as i}from"./Row-q1SNRrbp.js";import{C as s}from"./Col-BflThe67.js";import{M as x}from"./Modal-CsKgPfCY.js";import{B as f}from"./Button-BsmK-xwD.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./divWithClassName-BYsY4_Vt.js";import"./Button-wtvkehlk.js";function ot(_){const[y,ge]=r.useState(_.location.state),I=Ce(),[g,V]=r.useState(""),[q,W]=r.useState(""),[j,H]=r.useState(""),[N,z]=r.useState(""),[C,v]=r.useState(!1),[b,S]=r.useState(!1),[k,Z]=r.useState([]),[B,$]=r.useState([]),[ve,J]=r.useState([]),[L,w]=r.useState(!1),[K,O]=r.useState(),[E,Q]=r.useState(!1),G=()=>w(!1);r.useState(void 0);const[X,T]=r.useState(""),[t,u]=r.useState({id:"",deliveryTypeId:"",text:"",logo:"",partnerBankId:"",enabled:"",hasIssue:!1,countryId:14,deliveryTypeName:"",estimatedDelivery:"",locationId:"",locationIdNic:"",locationIdCit:"",locationIdEve:"",locationIdNmb:"",locationIdGlo:"",locationIdGme:"",locationIdEsewa:"",locationIdIpay:"",locationIdPrabhu:"",locationIdIme:"",bankSwiftCode:"",commission:"",charge:""}),Y=async()=>{let n=await m.get(p.BASE_URL+"/getactivedeliverytype");H(n.data.data)},U=n=>{const a=n.target.checked;v(a)},ee=n=>{n.preventDefault(),n.target.options[n.target.selectedIndex].text==="Bank Deposit"?he():xe();const{name:a,value:l}=n.target;z(n.target.options[n.target.selectedIndex].text),u({...t,[a]:parseInt(l),deliveryTypeName:n.target.options[n.target.selectedIndex].text}),O(l)},te=async()=>{let n=await m.get(p.BASE_URL+"/getallactivepartnerbanks");V(n.data.data)},ae=n=>{const{name:a,value:l}=n.target;W(l),u({...t,[a]:parseInt(l)})},[oe,be]=r.useState(null),ne=async n=>{try{const a=await m.get(p.BASE_URL+"/getallcountries");a.data.status===!0?Z(a.data.data):a.data.status==="error"&&console.log(a.data.message)}catch(a){console.log(a)}},se=n=>{const{name:a,value:l}=n.target;$(parseInt(l)),u({...t,[a]:parseInt(l)})},le=async n=>{try{const a=await m.post(p.BASE_URL+"/getallbanks",{});a.data.status===!0?J(a.data.data):a.data.status==="error"&&console.log(a.data.message)}catch(a){console.log(a)}},re=()=>{I("/deliveryMethod")},[M,D]=r.useState(!1),ce=async n=>{const{name:a,value:l}=n.target;if(t.deliveryTypeName==="Bank Deposit"||t.deliveryTypeName==="Wallet Deposit"){const Ne={deliveryTypeId:t.deliveryTypeId,text:l};if(l!==X)try{if((await m.post(p.BASE_URL+"/checktextexistornotfordeliverymethod",Ne)).data.data){D(!0);var c=document.getElementById("exists");c.classList.remove("d-none");var h=document.getElementById("Text");h.classList.add("is-invalidError")}else{D(!1);var c=document.getElementById("exists");c.classList.add("d-none");var h=document.getElementById("Text");h.classList.remove("is-invalidError")}}catch(F){console.error("API call failed:",F)}}T(l)},d=async n=>{const{name:a,value:l}=n.target;if(a=="text"){const c=l.replace(/[^A-Za-z]+/g,"");u({...t,[a]:c})}else{const c=l.replace(/[^A-Za-z0-9\s]+/g,"");u({...t,[a]:c})}},[ie,de]=r.useState(null),me=n=>{de(n.target.value)},pe=async()=>{const n={type:ie,enabled:!0};await m.post(`${p.BASE_URL}/adddeliverytype`,n),S(!1)},P=()=>S(!1),[Se,A]=r.useState([]),he=async n=>{try{const a=await m.post(p.BASE_URL+"/getallbanks",{type:"bank"});if(a.data.status===!0){const l=a.data.data.map(c=>({value:c.id,label:c.bankName}));A(l)}else a.data.status==="error"&&console.log(a.data.message)}catch(a){console.log(a)}},xe=async n=>{try{const a=await m.post(p.BASE_URL+"/getallbanks",{type:"wallet"});if(a.data.status===!0){const l=a.data.data.map(c=>({value:c.id,label:c.bankName}));A(l)}else a.data.status==="error"&&console.log(a.data.message)}catch(a){console.log(a)}};r.useState("");const[ye,ue]=r.useState(""),Ie=n=>{const{name:a,value:l}=n.target;ue(l)},je=async n=>{try{const a={id:ye},l=await m.post(p.BASE_URL+"/deletedeliverymethodtypebyid",a);w(!1),I("/deliveryMethodCreate")}catch(a){console.log(a)}},fe=async n=>{if((N==null||!t.text)&&Q(!0),M==!1){if(n.preventDefault(),y){const l={id:t.id,countryId:t.countryId,deliveryTypeId:t.deliveryTypeId,text:t.text,partnerBankId:t.partnerBankId,enabled:C,hasIssue:t.hasIssue,estimatedDelivery:t.estimatedDelivery,locationId:t.locationId,locationIdNic:t.locationIdNic,locationIdCit:t.locationIdCit,locationIdEve:t.locationIdEve,locationIdNmb:t.locationIdNmb,locationIdGlo:t.locationIdGlo,locationIdGme:t.locationIdGme,locationIdEsewa:t.locationIdEsewa,locationIdIpay:t.locationIdIpay,locationIdPrabhu:t.locationIdPrabhu,locationIdIme:t.locationIdIme,bankSwiftCode:t.bankSwiftCode,logo:oe,charge:t.charge};let c={method:"post",maxBodyLength:1/0,url:p.BASE_URL+"/updatedeliverymethod",headers:{"Content-Type":"application/json"},data:l};m.request(c).then(h=>{h.data.status===!0?I("/deliveryMethod"):I("/deliveryMethodCreate")}).catch(h=>{console.log(h)})}else if(t.deliveryTypeId!=""||t.text!=""){var a=(await m.post(p.BASE_URL+"/getdeliverytypebyid",{id:K})).data.data.logo;u({...t,logo:a}),new FormData;const c={countryId:t.countryId,bankId:t.bankId,deliveryTypeId:t.deliveryTypeId,text:t.text,logo:a,partnerBankId:t.partnerBankId,enabled:C,hasIssue:t.hasIssue,estimatedDelivery:t.estimatedDelivery,locationId:t.locationId,locationIdNic:t.locationIdNic,locationIdCit:t.locationIdCit,locationIdEve:t.locationIdEve,locationIdNmb:t.locationIdNmb,locationIdGlo:t.locationIdGlo,locationIdGme:t.locationIdGme,locationIdEsewa:t.locationIdEsewa,locationIdIpay:t.locationIdIpay,locationIdPrabhu:t.locationIdPrabhu,locationIdIme:t.locationIdIme,bankSwiftCode:t.bankSwiftCode,charge:t.charge};m.post(p.BASE_URL+"/adddeliverymethod",c,{headers:{"Content-Type":"application/json"}}).then(h=>{console.log(h.data),h.data.statuscode==200&&I("/deliveryMethod")}).catch(h=>{console.error(h)})}}else n.preventDefault(),I("/deliveryMethodCreate")};return r.useEffect(()=>{if(ne(),te(),Y(),le(),y){const n={id:y};m.post(`${p.BASE_URL}/getdeliverymethodbyid`,{id:n.id}).then(a=>{u(a.data.data),T(a.data.data.text),v(a.data.data.enabled)}).catch(a=>{console.log(a)})}},[b,L]),e.jsx(e.Fragment,{children:e.jsxs("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[e.jsx(R,{children:e.jsx("div",{className:"mainBoxService mt-5",children:e.jsxs("div",{className:"serviceHeader bg-white text-white rounded-2",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Delivery Method"}),e.jsx("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:e.jsx(R,{children:e.jsxs(o,{id:"deliveryCheck",children:[e.jsx(i,{className:"mb-3",children:e.jsxs(o.Group,{as:s,controlId:"formGridState",children:[e.jsx(o.Label,{children:"Country"}),e.jsxs(o.Select,{value:t?t.countryId:B!==void 0?B:"14",onChange:se,name:"countryId",disabled:y,className:"required",children:[e.jsx("option",{value:"",children:"Select Country"}),k&&k.map((n,a)=>e.jsxs("option",{value:n.id,children:[n.emoji,"  ",n.name]}))]}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error",children:"Please select Country"})]})}),e.jsx(i,{children:e.jsxs(o.Group,{controlId:"formGridState",className:"mt-1",children:[e.jsx(o.Label,{children:"Type"}),e.jsx("div",{className:"d-flex",children:e.jsxs(s,{className:"col-lg-12 px-0",children:[e.jsxs(o.Select,{value:t?t.deliveryTypeId:N,onChange:ee,required:!0,name:"deliveryTypeId",disabled:y,className:"required",children:[e.jsx("option",{value:"",children:"Select Type"}),j&&j.map((n,a)=>e.jsx("option",{value:n.id,children:n.type},a))]}),E&&!N&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please select Type"})]})})]})}),e.jsx(i,{children:e.jsxs(o.Group,{controlId:"formGridState",className:"mt-3 respoChildFooter pbSt",children:[e.jsx(o.Label,{children:"Default Payout Partner Bank"}),e.jsxs(o.Select,{value:t?t.partnerBankId:q,onChange:ae,name:"partnerBankId",children:[e.jsx("option",{value:0,children:"Select Payout Partner Bank"}),g&&g.map((n,a)=>e.jsx("option",{value:n.id,children:n.name}))]})]})}),e.jsx(i,{className:"mt-3 respoChildFooter pbSt",children:e.jsxs(o.Group,{as:s,controlId:"formGridState",children:[e.jsx(o.Label,{children:(t==null?void 0:t.deliveryTypeName)=="Bank Deposit"?"Bank Name":(t==null?void 0:t.deliveryTypeName)=="Wallet Deposit"?"Wallet Name":(t==null?void 0:t.deliveryTypeName)=="Cash Pickup"?"Type Name":"Text"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"form-control required",id:"Text",onBlur:ce,onChange:d,name:"text",value:t==null?void 0:t.text}),E&&!(t!=null&&t.text)&&e.jsxs("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:["Please enter ",(t==null?void 0:t.deliveryTypeName)=="Bank Deposit"?"Bank Name":(t==null?void 0:t.deliveryTypeName)=="Wallet Deposit"?"Wallet Name":(t==null?void 0:t.deliveryTypeName)=="Cash Pickup"?"Type Name":"Text"]}),M&&e.jsx("small",{id:"exists",className:"text-danger error_message ms-2 error",children:"Name already exists"})]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"mt-3 d-flex",children:[e.jsx("input",{type:"checkbox",id:"vehicle1",name:"isActive",value:"true",className:"main-radio requiredCheckBox",onChange:U,checked:C}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Active"})]})}),e.jsx(i,{className:"mt-4 respoChildFooter pbSt",children:e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Estimated Delivery"}),e.jsx(o.Control,{type:"text",placeholder:"Estimated Delivery",onChange:d,name:"estimatedDelivery",className:"form-input",value:t==null?void 0:t.estimatedDelivery})]})})}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Bank Swift Code"}),e.jsx(o.Control,{type:"text",placeholder:"Bank Swift Code",onChange:d,name:"bankSwiftCode",className:"form-input",value:t==null?void 0:t.bankSwiftCode})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Branch Code in Global"}),e.jsx(o.Control,{type:"text",placeholder:"Branch Code in Global",onChange:d,name:"locationIdGlo",className:"form-input",value:t==null?void 0:t.locationIdGlo})]})})]}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in Everest"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in Everest",onChange:d,name:"locationIdEve",className:"form-input",value:t==null?void 0:t.locationIdEve})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in NMB"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in NMB",onChange:d,name:"locationIdNmb",className:"form-input",value:t==null?void 0:t.locationIdNmb})]})})]}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in Citizens"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in Citizens",onChange:d,name:"locationIdCit",className:"form-input",value:t==null?void 0:t.locationIdCit})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location Code in GME"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location Code in GME",onChange:d,name:"locationIdGme",className:"form-input",value:t==null?void 0:t.locationIdGme})]})})]}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in NIC"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in NIC",onChange:d,name:"locationIdNic",className:"form-input",value:t==null?void 0:t.locationIdNic})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in Sunrise"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in Sunrisey",onChange:d,name:"locationId",className:"form-input",value:t==null?void 0:t.locationId})]})})]}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in eSewa"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in eSewa",onChange:d,name:"locationIdEsewa",className:"form-input",value:t==null?void 0:t.locationIdEsewa})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in iPay"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in iPay",onChange:d,name:"locationIdIpay",className:"form-input",value:t==null?void 0:t.locationIdIpay})]})})]}),e.jsxs(i,{className:"mt-3 respoChildFooter pbSt",children:[e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in Prabhu"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in Prabhu",onChange:d,name:"locationIdPrabhu",className:"form-input",defaultValue:t==null?void 0:t.locationIdPrabhu})]})}),e.jsx(s,{children:e.jsxs(o.Group,{as:s,className:"left-inner-addon input-container",children:[e.jsx(o.Label,{children:"Location ID in IME"}),"  ",e.jsx("a",{href:"#",children:"View"}),e.jsx(o.Control,{type:"text",placeholder:"Location ID in IME",onChange:d,name:"locationIdIme",className:"form-input",defaultValue:t==null?void 0:t.locationIdIme})]})})]}),e.jsx(i,{children:e.jsxs("div",{className:"row d-flex m-auto mt-3",children:[e.jsxs("a",{className:"purpleBackground btn btn-default text-white bolder d-block w-auto",onClick:fe,children:[" ",y?"Update":"Create"]}),"  ",e.jsx("a",{className:"btn btn-default  text-black bolder w-auto",onClick:re,children:" Cancel"})]})})]})})})]})})}),e.jsxs(x,{show:b,centered:!0,children:[e.jsx(x.Header,{onHide:P,closeButton:!0,children:e.jsx(x.Title,{className:"p-0 m-0"})}),e.jsxs(x.Body,{children:[e.jsx("h3",{className:"bolder text-center",children:"Add New Delivery Method"}),e.jsx("br",{}),e.jsx(o.Group,{as:s,className:"",controlId:"formGridCity",children:e.jsxs(s,{className:"px-0",children:[e.jsx(o.Label,{className:"fs-5",children:" Default Partner Bank "}),e.jsx(o.Control,{className:"fs-5",id:"PaymentName",type:"text",onChange:me})]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(i,{className:"justify-content-center",children:[e.jsx(s,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(f,{variant:"primary",className:"w-75 py-3",onClick:pe,children:"Save"})}),e.jsx(s,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(f,{variant:"secondary",className:"w-75 py-3",onClick:P,children:"Cancel"})})]})]})]}),e.jsxs(x,{show:L,centered:!0,children:[e.jsx(x.Header,{onHide:G,closeButton:!0,children:e.jsx(x.Title,{className:"p-0 m-0"})}),e.jsxs(x.Body,{children:[e.jsx("h3",{className:"bolder text-center",children:"Delete Delivery Type"}),e.jsx("br",{}),e.jsx(s,{className:"col-lg-11 px-0",children:e.jsxs(o.Select,{onChange:Ie,name:"deliveryMethodName",disabled:y,children:[e.jsx("option",{children:"Select Delivery type Name"}),j&&j.map((n,a)=>e.jsx("option",{value:n.id,children:n.type},a))]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(i,{className:"justify-content-center",children:[e.jsx(s,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(f,{variant:"primary",className:"w-75 py-3",onClick:je,children:"Delete"})}),e.jsx(s,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(f,{variant:"secondary",className:"w-75 py-3",onClick:G,children:"Cancel"})})]})]}),e.jsx(x.Footer,{})]})]})})}export{ot as default};
