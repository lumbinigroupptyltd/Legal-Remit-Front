import{r as s,R as C,j as e,b as x}from"./index-CZLZpOaH.js";import{P as X}from"./PageHeader-6CScOhCz.js";import{C as c}from"./common.constants-BAKO8LyS.js";import{d as G}from"./RemoveRedEye-CUxvqEwQ.js";import{h as D}from"./moment-CAEcp8GN.js";import{N as J}from"./NoRecordWithAddBtn-DmeiGlWH.js";import{L as K}from"./Loader-BUXOLHKX.js";import{d as Q}from"./Close-Dzfaz63K.js";import{M as Z}from"./ModalComponentPopup-D_u4dGYC.js";import{M as ee}from"./ModalComponent-Can9sfzz.js";import{F as ae}from"./Form-ExWjSL5Y.js";import{P as te}from"./Pagination-DBwceeB_.js";import{M as se}from"./Modal-Cgbm8Po3.js";import{B as oe}from"./Box-Jn0s_-VR.js";import{B as re}from"./Button-CasUi-tz.js";import"./DashbordData-n50t2wKP.js";import"./createSvgIcon-BXb30exD.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ownerWindow-B35kT-qP.js";import"./useId-BCOK0MJf.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./useControlled-CSwFU9cf.js";import"./Modal-CsKgPfCY.js";import"./ThemeProvider-BovkV_tw.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./index-tz1zYP65.js";import"./divWithClassName-BYsY4_Vt.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";import"./ButtonBase-Dp3TaUiU.js";import"./assertThisInitialized-B9jnkVVz.js";import"./isHostComponent-D6l1mxjA.js";import"./Portal-BnZs0see.js";const la=()=>{const[n,M]=s.useState(c.DefaultPageSize),[r,u]=s.useState(1),[m,P]=s.useState(""),[l,A]=s.useState([]),[h,I]=C.useState(0),[E,_]=C.useState(0),[R,v]=s.useState(!1),[k,i]=s.useState(!1),[F,b]=s.useState(!1),[o,B]=s.useState({id:0,haveCustomerId:!1,customerId:"",userId:0,fullName:"",email:"",phone:"",haveTransactionNo:!0,transactionNo:"",reason:"",createdAt:"",updatedAt:"",deleted:!1}),[T,d]=s.useState(!1),[le,S]=s.useState(0),[w,y]=s.useState(0),[j,p]=s.useState(""),[Y,f]=s.useState(!1),$=()=>{d(!1)},N=async()=>{i(!0);const a={pageindex:r,pagesize:n,searchdata:m},t=await x.post(c.NEW_BASE_URL+"/getalltransactioncancelrequests",a);t.data.status==!0&&(A(t.data.data),_(t.data.totalPageCount),I(t.data.recordCount),v(t.data.recordCount==0?m!="":!0)),i(!1)},L=a=>{const t=a.target.value;P(t),v(l.length>0||t.trim()!=="")},W=a=>{M(Number(a.target.value)),u(1)},q=(a,t)=>{t==r,u(t)},H=async a=>{await x.get(c.NEW_BASE_URL+`/gettransactioncancelrequestbyid?id=${a}`).then(t=>{t.data.status==!0&&(B(t.data.data),b(!0))}).catch(t=>{console.log(t)})},g=()=>{b(!1)},U=async(a,t)=>{S(a),y(t),d(!0),p("accept")},z=(a,t)=>{S(a),y(t),d(!0),p("reject")},O=async()=>{i(!0),d(!1);const a=new FormData;a.append("status",1),a.append("transactionId",w),(await x.post(c.NEW_BASE_URL+"/updatestatuscanceltransactionreq",a)).data.status==!0&&(N(),p("accept"),f(!0)),i(!1)},V=async()=>{i(!0),d(!1);const a=new FormData;a.append("status",2),a.append("transactionId",w),(await x.post(c.NEW_BASE_URL+"/updatestatuscanceltransactionreq",a)).data.status==!0&&(N(),p("reject"),f(!0)),i(!1)};return s.useEffect(()=>{N()},[m,n,r]),e.jsxs(e.Fragment,{children:[k==!0?e.jsx(K,{}):"",e.jsxs("div",{className:"container-fluid",onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[e.jsx(X,{HeaderText:"Cancel Transactions",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"body project_report",children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter ",children:[e.jsxs("div",{className:"filter-row pb-2 ",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center pbSt",children:e.jsx(ae.Select,{name:"tbl_meeting_length",onChange:W,value:n,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:c.show_rows.map(a=>e.jsx("option",{value:a,children:a}))})})]}),e.jsxs("div",{className:"d-flex align-items-center respoChildFooter",children:[R&&e.jsxs("div",{className:"form-group d-flex align-items-center mb-0",children:[e.jsx("label",{className:"font-weight-normal mb-0",children:"Search: "}),"   ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 px-3 ",placeholder:"",value:m,onChange:L})]})," "]})]}),l&&l.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table m-b-0 table-hover mt-3",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Customer Id"}),e.jsx("th",{children:"Transaction Number"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:l&&l.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.fullName?a.fullName:"-"}),e.jsx("td",{children:a.email?a.email:"-"}),e.jsx("td",{children:a.phone?a.phone:"-"}),e.jsx("td",{children:a.customerId?a.customerId:"-"}),e.jsx("td",{children:a.transactionNo?a.transactionNo:"-"}),e.jsx("td",{children:D(a.createdAt).format("YYYY-MM-DD")}),e.jsx("td",{className:"project-actions",children:e.jsxs(e.Fragment,{children:[a.status==0&&e.jsxs(e.Fragment,{children:[e.jsx("a",{className:"bg-transparent px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>U(a.id,a.transactionId),children:e.jsx("i",{class:"fa fa-check","aria-hidden":"true",style:{color:"green"},title:"Accept"})}),"",e.jsx("a",{className:"bg-transparent px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>z(a.id,a.transactionId),children:e.jsx("i",{class:"fa fa-times","aria-hidden":"true",style:{color:"red"},title:"Reject"})})]}),"",e.jsx("a",{className:"btn btn-outline-secondary mr-1",title:"View",onClick:()=>H(a.id),children:e.jsx(G,{})})," "]})})]}))})]})}):e.jsx(J,{}),l&&l.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2",children:h>0?`Showing ${(r-1)*n+1} to ${r*n>h?h:r*n} of ${h} entries`:"No records Available"}),e.jsx(te,{count:E,className:"pbDowSt pbSt",page:r,onChange:q,color:"secondary",shape:"rounded"})]})]})})})})}),e.jsx(se,{open:F,onClose:g,children:e.jsxs(oe,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",width:{xs:"90%",sm:"70%",md:"50%",lg:"40%"},paddingBottom:"20px"},children:[e.jsxs("div",{className:"border-bottom py-2 mb-4 d-flex justify-content-between",children:[e.jsx("h5",{children:"Details"}),e.jsx("div",{onClick:g,className:"pointer",children:e.jsx(Q,{})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"my-2",children:e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Full Name : "}),e.jsxs("div",{className:"",children:[o.fullName?o.fullName:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Email : "}),e.jsxs("div",{className:" ",style:{overflowWrap:"break-word"},children:[o.email?o.email:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Mobile : "}),e.jsxs("div",{className:"",children:[o.phone?o.phone:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Customer Id : "}),e.jsxs("div",{className:"",children:[o.customerId?o.customerId:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Transaction Number : "}),e.jsxs("div",{className:"",children:[o.transactionNo?o.transactionNo:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Reason : "}),e.jsxs("div",{className:"",children:[o.reason?o.reason:"-"," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Date : "}),e.jsxs("div",{className:"",children:[D(o.createdAt).format("YYYY-MM-DD")," "]})]})]})})})}),e.jsx("div",{className:"row d-flex justify-content-end mt-3 border-top",children:e.jsx("div",{className:"col-lg-3",children:e.jsx(re,{className:"m-0 mt-3",variant:"outlined",onClick:g,children:"Close"})})})]})}),e.jsx(Z,{show:T,title1:`Are you sure want to ${j} this request ?`,cancle:a=>$(),SavePr:()=>j=="accept"?O():V()}),e.jsx(ee,{show:Y,title11:`${j} successfully`,onHide:()=>f(!1)})]})]})};export{la as default};
