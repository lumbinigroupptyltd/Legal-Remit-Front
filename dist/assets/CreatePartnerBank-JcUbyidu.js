import{r as c,y as w,j as e,b as g}from"./index-CZLZpOaH.js";import{C as j}from"./common.constants-BAKO8LyS.js";import{L as E}from"./Loader-BUXOLHKX.js";import{C as f}from"./Container-D9at3elR.js";import{R as o}from"./Row-q1SNRrbp.js";import{C as l}from"./Col-BflThe67.js";import{F as a}from"./Form-ExWjSL5Y.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";function Z(N){c.useRef(null);const p=w();c.useState(!0);const[v,x]=c.useState(!1);c.useState("pay1");const[C,I]=c.useState([]),[h,W]=c.useState(N.location.state),[y,L]=c.useState(),[P,F]=c.useState(!1),[m,k]=c.useState(null),[S,U]=c.useState(!1),[s,d]=c.useState({id:"",name:"",address:"",city:"",countryId:14,enabled:!1,apiSecret:"",apiIp:"",maxProcessableAmount:"",minTransaction:"",maxTransaction:"",openingBalance:"",hasIssue:!1,commissionWallet:"",commissionCash:"",commissionBank:""}),G=r=>{const n=r.target.checked,t=r.target.name;d({...s,[t]:n})},A=r=>{const n=r.target.checked,t=r.target.name;d({...s,[t]:n})},B=r=>{k(r.target.files[0])},T=()=>{if(h){const r=require("form-data");let n=new r;n.append("data",`{
      "id":${h},
      "name":"${s.name}",
      "address":"${s.address}",
      "city":"${s.city}",
      "countryId":${s.countryId},
      "apiSecret":"${s.apiSecret}",
      "apiIp":"${s.apiIp}",
      "maxProcessableAmount":${s.maxProcessableAmount},
      "openingBalance":${s.openingBalance},
      "minTransaction":${s.minTransaction},
      "maxTransaction":${s.maxTransaction},
      "commissionBank":${s.commissionBank},
      "commissionCash":${s.commissionCash},
      "commissionWallet":${s.commissionWallet},
      "enabled":${s.enabled},
      "hasIssue":${s.hasIssue}
    }`),n.append("logo",m);let t={method:"post",maxBodyLength:1/0,url:j.BASE_URL+"/updatepartnerbank",headers:{"Content-Type":"multipart/form-data"},data:n};g.request(t).then(u=>{p("/partner-bank"),x(!1)}).catch(u=>{console.log(u),x(!1)})}else if(m==null||m=="null")F(!0);else{const r=new FormData;r.append("data",JSON.stringify({name:s.name,address:s.address,city:s.city,countryId:s.countryId,enabled:s.enabled,apiSecret:"",apiIp:"",maxProcessableAmount:parseInt(s.maxProcessableAmount),openingBalance:parseInt(s.openingBalance),minTransaction:parseInt(s.minTransaction),maxTransaction:parseInt(s.maxTransaction),commissionBank:parseFloat(s.commissionBank),commissionCash:parseFloat(s.commissionCash),commissionWallet:parseFloat(s.commissionWallet),hasIssue:s.hasIssue})),r.append("logo",m);let n={method:"post",maxBodyLength:1/0,url:j.BASE_URL+"/addpartnerbank",headers:{"Content-Type":"multipart/form-data"},data:r};g.request(n).then(t=>{t.data.status==!0?p("/partner-bank"):p("/create-partner-bank")}).catch(t=>{x(!1)})}},_=async()=>{if(h)try{const r={id:h},n=await g.post(j.BASE_URL+"/getpartnerbanksbyid",r);n.data.status===!0?d(n.data.data):n.data.status==="error"&&console.log(n.data.message)}catch(r){console.log(r)}},i=r=>{const{name:n,value:t}=r.target;if(["minTransaction","maxTransaction","maxProcessableAmount","openingBalance"].includes(n)){const u=t.replace(/\D/g,"");d(b=>({...b,[n]:u}));return}if(["commissionBank","commissionWallet","commissionCash"].includes(n)){const u=t.replace(/[^0-9.]/g,"");d(b=>({...b,[n]:u}));return}d({...s,[n]:t})},$=async r=>{x(!0);try{const n=await g.get(j.BASE_URL+"/getallcountries");n.data.status===!0?I(n.data.data):n.data.status,x(!1)}catch{x(!1)}},q=r=>{const{name:n,value:t}=r.target;L(parseInt(t)),d({...s,[n]:parseInt(t)})};c.useEffect(()=>{$(),_()},[]);const R=()=>{p("/partner-bank")};return e.jsx(e.Fragment,{children:e.jsx("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx(f,{children:e.jsxs(o,{children:[v==!0?e.jsx(E,{}):"",e.jsx(l,{className:"col-lg-12",children:e.jsx("div",{className:"mainBoxService mt-5",children:e.jsxs("div",{className:"serviceHeader bg-white text-white rounded-2",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Partner Bank"}),e.jsx("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:e.jsx(f,{className:"",children:e.jsxs(a,{id:"partnerBankCheck",children:[e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Country"}),e.jsxs(a.Select,{id:"countryId",name:"countryId",value:s?s.countryId:y!==void 0?y:"14",onChange:q,children:[e.jsx("option",{children:"Select Country"}),C&&C.map((r,n)=>e.jsxs("option",{value:r.id,children:[r.emoji,"  ",r.name]}))]}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please select file"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Bank Name"}),e.jsx(a.Control,{id:"name",name:"name",value:s==null?void 0:s.name,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter Bank Name"})]})}),(s.logo||m)&&e.jsx("img",{src:m?URL.createObjectURL(m):s.logo,alt:"",className:"paymentImage mb-3"}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",className:"border-0",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{marginBottom:"0.5rem"},children:"Logo"}),e.jsx(a.Control,{type:"file",name:"logo",accept:"image/*",onChange:B,className:"rounded-0 border-0"})]}),P&&e.jsx("small",{className:"text-danger error_message error_message_number ms-2",children:"Please Select Image"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Opening Balance"}),e.jsx(a.Control,{type:"text",id:"openingBalance",name:"openingBalance",value:s.openingBalance,onChange:i,className:"required",disabled:!!h}),e.jsx("small",{className:"responsiveFontLarge d-none text-danger error_message ms-2 error notentered",children:"Please enter valid opening Balance. Amount"}),S&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Opening balance should be grater than Reserve balance"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Reserve Balance"}),e.jsx(a.Control,{type:"text",id:"maxProcessableAmount",name:"maxProcessableAmount",value:s.maxProcessableAmount,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge d-none text-danger error_message ms-2 error notentered",children:"Please enter valid Reserve Balance Amount"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Min Transaction Amount"}),e.jsx(a.Control,{type:"text",id:"minTransaction",name:"minTransaction",value:s==null?void 0:s.minTransaction,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter valid Min Transaction Amount"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Max Transaction Amount"}),e.jsx(a.Control,{type:"text",id:"maxTransaction",name:"maxTransaction",value:s==null?void 0:s.maxTransaction,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter valid Max Transaction Amount"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Commission For Bank Deposite %"}),e.jsx(a.Control,{type:"text",id:"commissionBank",name:"commissionBank",value:s==null?void 0:s.commissionBank,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter Commission For Bank Deposite"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Commission For Wallet Deposite %"}),e.jsx(a.Control,{type:"text",id:"commissionWallet",name:"commissionWallet",value:s==null?void 0:s.commissionWallet,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter Commission For Wallet Deposite"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Commission For Cash Pickup %"}),e.jsx(a.Control,{type:"text",id:"commissionCash",name:"commissionCash",value:s==null?void 0:s.commissionCash,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter Commission For  Cash Pickup"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Address"}),e.jsx(a.Control,{type:"text",id:"address",name:"address",value:s==null?void 0:s.address,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter Address"})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"City"}),e.jsx(a.Control,{id:"city",name:"city",value:s==null?void 0:s.city,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error notentered",children:"Please enter City"})]})}),e.jsx(o,{className:"mt-3",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("input",{type:"checkbox",id:"hasissue",name:"hasIssue",className:"main-radio",checked:s.hasIssue,onChange:A}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Has Issue ?"})]})}),e.jsx(o,{className:"mt-3",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("input",{type:"checkbox",id:"enabled",name:"enabled",className:"main-radio",checked:s.enabled,onChange:G}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Enabled"})]})}),e.jsx(o,{className:"d-none mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"API Secret Key"}),e.jsx(a.Control,{id:"apiSecret",name:"apiSecret",value:s==null?void 0:s.apiSecret,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error checkboxError",children:"Please select API Secret Key"})]})}),e.jsx(o,{className:"d-none mb-4",children:e.jsxs(a.Group,{as:l,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"API IP"}),e.jsx(a.Control,{id:"apiIp",name:"apiIp",value:s==null?void 0:s.apiIp,onChange:i,className:"required"}),e.jsx("small",{className:"responsiveFontLarge  d-none text-danger error_message ms-2 error checkboxError",children:"Please select API IP"})]})}),e.jsxs("div",{className:"row d-flex m-auto pt-3 border-top",children:[e.jsx("a",{className:"purpleBackground btn btn-default text-white bolder d-block w-auto",onClick:T,children:h?"Update":"Create"}),"  ",e.jsxs("a",{className:"btn btn-default ms-3 text-black bolder border 2 w-auto",onClick:R,children:[" ","Cancel"]})]})]})})})]})})})]})})})})}export{Z as default};
