import{r as t,R as v,y as ke,j as e,ao as we,b as R}from"./index-CZLZpOaH.js";import{P as Te}from"./PageHeader-6CScOhCz.js";import{L as Ae}from"./Loader-BUXOLHKX.js";import{h as m}from"./moment-CAEcp8GN.js";import{M as Ye}from"./ModalComponent-Can9sfzz.js";import{C as j}from"./common.constants-BAKO8LyS.js";import{M as Me}from"./ModalComponentPopup-D_u4dGYC.js";import{d as Re,a as Be}from"./Apple-DHOZrOuh.js";import{d as V,a as Pe}from"./Android-xQs9HrEm.js";import{N as Ie}from"./NoRecordWithAddBtn-DmeiGlWH.js";import{F as Ve}from"./FileSaver.min-x92xCJF9.js";import{d as Le}from"./Close-Dzfaz63K.js";import{F as r}from"./Form-ExWjSL5Y.js";import{B as C}from"./Button-CasUi-tz.js";import{T as Ue}from"./Tooltip-DYflzQT5.js";import{P as Fe}from"./Pagination-DBwceeB_.js";import{M as _e}from"./Modal-Cgbm8Po3.js";import{B as Ee}from"./Box-Jn0s_-VR.js";import"./DashbordData-n50t2wKP.js";import"./Modal-CsKgPfCY.js";import"./ThemeProvider-BovkV_tw.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./index-tz1zYP65.js";import"./divWithClassName-BYsY4_Vt.js";import"./createSvgIcon-BXb30exD.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ownerWindow-B35kT-qP.js";import"./useId-BCOK0MJf.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./useControlled-CSwFU9cf.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";import"./ButtonBase-Dp3TaUiU.js";import"./assertThisInitialized-B9jnkVVz.js";import"./Portal-BnZs0see.js";import"./isHostComponent-D6l1mxjA.js";import"./createPopper-iTKh2FQm.js";function Ha(){const[L,n]=t.useState(!1),[h,U]=v.useState(j.DefaultPageSize),[p,F]=v.useState(""),[c,g]=v.useState(1),[_,E]=v.useState(0),[u,K]=v.useState(0),[O,b]=t.useState(!1),[$,H]=t.useState(0);t.useState();const[z,B]=t.useState(!1),[q,P]=t.useState(!1),[i,W]=t.useState([]),[X,I]=t.useState(!1),[x,G]=t.useState(""),[f,J]=t.useState(""),[y,Q]=t.useState(""),[D,Z]=t.useState(""),[k,ee]=t.useState(""),[w,ae]=t.useState(""),[T,se]=t.useState(""),[A,te]=t.useState(0),[Y,le]=t.useState(0);ke();const N=()=>{P(!1)},d={first:"#c5e1b2",second:"#9cc3e6",third:"#fee799",fourth:"#afabab",fifth:"#ededed",sixth:"#ecedec",seventh:"#fae4d6"},oe=a=>{const l=a.target.value,o=m(l).format("YYYY-MM-DD");G(o)},re=a=>{const l=a.target.value,o=m(l).format("YYYY-MM-DD");J(o)},ne=a=>{Q(a)},ie=a=>{Z(a)},ce=a=>{ee(a)},de=a=>{ae(a)},he=a=>{se(a)},me=a=>{te(a)},pe=a=>{le(a)},ue=async a=>{b(!0),H(a)},xe=()=>{b(!1)},fe=()=>{M()},M=async a=>{var l;n(!0),n(p==="");try{const o={pageindex:c,pagesize:h,searchdata:p,sortparam:"created_at",sortorder:"DESC",fromDate:x=="Invalid date"?"":x,toDate:f=="Invalid date"?"":f,riskLevel:y,isSignupDone:k,kycVerified:D,kycVerifiedBy:w,noOfTransaction:T,userType:parseInt(Y),activeDays:parseInt(A)},s=await R.post(j.BASE_URL+"/getallusers",o);s.data.status===!0&&(W(s.data.data),E((l=s.data)==null?void 0:l.totalPageCount),K(s.data.recordCount),B(s.data.recordCount==0?p!="":!0),N());const S=d[""]||""}catch(o){console.log(o)}n(!1)},ve=a=>{const l=a.target.value;F(l),g(1),B(i.length>0||l.trim()!=="")},je=()=>{P(!0)};function ge(a){const o=[["S.N","Date of Registration","Customer ID","User Name","Mobile","Email","Date of Birth","No of Transaction","Total Amount sent","Date of First Transaction","Date of Last Transaction","Average Transaction Size","Total Service charge","Total No of Recipient","KYC Status","KYC Verification method","KYC Verified By","Risk Level","Street Name","Suburb","State","Postal Code","Country","Referred By","Referred to","Points","Used Cash Balnce","Available cash balance"].join(",")];return a.forEach((s,S)=>{const De=[S+1,m(s.createdAt).format(" DD MMM YYYY h:mm A"),s.customerId,s.fName+s.lName,s.phone,s.email,s.dob,s.totalNoTransactions,s.totalSentAmt,s.firstTranDate,s.lastTranDate,s.avgTranSize,s.totalServiceCharge,s.noOfRecipients,s.kycVerified==!0?"Verified":"Unverified",s.isDigital==!0?"Digitally":"Manually",s.paymentMethod,s.riskLevel==null?"":s.riskLevel,s.businessAddress,s.country,s.referredBy,"","",""];o.push(De.join(","))}),o.join(`
`)}const Ne=async a=>{n(!0);const l={pageindex:c,pagesize:u,searchdata:p,sortparam:"created_at",sortorder:"DESC",fromDate:x=="Invalid date"?"":x,toDate:f=="Invalid date"?"":f,riskLevel:y,isSignupDone:k,kycVerified:D,kycVerifiedBy:w,noOfTransaction:T,userType:parseInt(Y),activeDays:parseInt(A)},o=await R.post(j.BASE_URL+"/getallusers",l);if(n(!1),o.data.status==!0){const s=ge(o.data.data),S=new Blob([s],{type:"text/csv;charset=utf-8"});Ve.saveAs(S,"UserReports.csv")}};t.useEffect(()=>{M()},[h,c,p]);const Se=async()=>{b(!1),n(!0),await R.post(`${j.BASE_URL}/deleteuserbyid`,{id:$}).then(a=>{a.data.statuscode&&I(!0),M(),n(!1)}).catch(a=>{n(!1)})},Ce=a=>{U(Number(a.target.value)),g(1)},be=(a,l)=>{l==c,g(l)},ye=a=>{window.scrollTo(0,0)};return e.jsxs(e.Fragment,{children:[L==!0?e.jsx(Ae,{}):"",e.jsx("div",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx("div",{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(Te,{HeaderText:"Users",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"body project_report",children:e.jsxs("div",{className:"table-responsive1",children:[e.jsx("div",{className:"row d-flex g-0",children:e.jsx("div",{className:""})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter ",children:[i&&i.length>0&&e.jsxs("div",{className:"filter-row mb-2 ",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center pbSt",children:e.jsx(r.Select,{name:"tbl_meeting_length",onChange:Ce,value:h,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:j.show_rows.map(a=>e.jsx("option",{value:a,children:a}))})})]}),e.jsxs("div",{className:"form-group  d-flex align-items-center pbSt",children:[z&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"fw-bolder mb-0",children:"Search: "})," ","  ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 ps-3 pe-3",placeholder:"",onChange:ve})]}),"  ",e.jsx("div",{children:e.jsx(C,{variant:"outlined",color:"primary",className:"m-0",onClick:je,children:e.jsx("i",{className:"fa fa-filter",title:"Filter"})})})," ","  ",e.jsx("div",{children:e.jsx(C,{variant:"outlined",color:"primary",onClick:Ne,className:"m-0",children:e.jsx("i",{className:"fa fa-download",title:"Download"})})})]})]}),i&&i.length>0?e.jsx("div",{style:{overflowX:"auto",overflowY:"hidden"},id:"style-4",children:e.jsxs("table",{className:"table m-b-0",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Email/ID"}),e.jsxs("th",{children:["Registered ",e.jsx("br",{})," Date"]}),e.jsx("th",{children:"User Type"}),e.jsx("th",{children:"KYC Verified"}),e.jsxs("th",{children:["Total No. of ",e.jsx("br",{})," Transactions"]}),e.jsx("th",{children:"KYC Status"}),e.jsx("th",{children:"Actions"})]})}),i&&i.map(a=>{const o=m(a.createdAt).fromNow();return e.jsx("tbody",{children:e.jsxs("tr",{style:{backgroundColor:a.isSignupCompleted===!0&&a.kycVerified===!0&&a.totalNoTransactions==0?d.third:a.isSignupCompleted===!0&&a.kycVerified===!1?d.fourth:a.isSignupCompleted===!0?d.seventh:a.kycVerified==!1&&a.totalNoTransactions>0?d.fifth:a.totalNoTransactions>1?d.first:d.second},children:[e.jsxs("div",{className:"mt-2 d-flex text-black fw-normal",children:[(a==null?void 0:a.client)==="web"?e.jsx(V,{}):(a==null?void 0:a.client)==="android"?e.jsx(Pe,{}):(a==null?void 0:a.client)==="iphone"?e.jsx(Re,{}):e.jsx(V,{})," ",e.jsx(we,{className:"d-flex align-items-center w-75 text-black fw-normal ",to:{pathname:"/individualuser",state:a.id},onClick:()=>ye(a.id),children:e.jsxs("div",{className:"border-0",children:[a.fName," ",a.lName]})})," ",e.jsx(Ue,{title:o,placement:"top",className:"ms-auto",children:e.jsx(Be,{className:"text-black",color:"black"})})]}),e.jsx("td",{className:"border-0",children:a.phone===""?"-":a.phone[0]!=="0"?"0"+a.phone:a.phone}),e.jsx("td",{className:"border-0",children:a.email==""?"-":a.email}),e.jsxs("td",{className:"border-0",children:[m(a.createdAt).format("DD/MM/YYYY")," ",e.jsx("br",{}),m(a.createdAt).format("HH:MM:SS")]}),e.jsx("td",{children:a.roleId==2?"Individual":a.roleId==3?"Business":"Agent"}),e.jsx("td",{className:"border-0",children:a.isDigital===!0?"Digitally":"Manually"}),e.jsx("td",{className:"border-0",children:a.totalNoTransactions}),e.jsx("td",{className:"border-0",children:a.kycVerified==!0?"Verified":"Unverified"}),e.jsx("td",{className:"border-0",children:e.jsx("a",{onClick:()=>{ue(a.id)},className:"bg-transparent  px-3 py-2 rounded-2 border-1 border pointer border-black",children:e.jsx("i",{className:"fa fa-trash",style:{color:"red"},title:"Delete"})})})]},a.id)})})]})}):e.jsx(Ie,{}),i&&i.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2",children:u>0?`Showing ${(c-1)*h+1} to ${c*h>u?u:c*h} of ${u} entries`:"No records Available"}),e.jsx(Fe,{count:_,className:"pbDowSt pbSt",page:c,defaultPage:7,onChange:be,color:"secondary",shape:"rounded"})]}),e.jsx(Ye,{show:X,title11:"Deleted successfully",onHide:()=>I(!1)}),e.jsx(Me,{show:O,title1:"Are you sure want to delete this record ?",cancle:a=>xe(),SavePr:()=>Se()})]})})})})}),e.jsx(_e,{open:q,onClose:N,children:e.jsxs(Ee,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",width:{xs:"90%",sm:"70%",md:"60%",lg:"60%"},paddingBottom:"20px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"border-bottom py-2 mb-2 d-flex justify-content-between",children:[e.jsx("h5",{children:"Filter"}),e.jsx("div",{onClick:N,className:"pointer",children:e.jsx(Le,{})})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"From"}),e.jsx(r.Control,{type:"date",required:!0,placeholder:"From date",name:"Referal",className:"reflink link py-4 pbSt",value:x,onChange:oe})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"To"}),e.jsx(r.Control,{type:"date",required:!0,placeholder:"To date",name:"Referal",className:"reflink link py-4 pbSt",value:f,onChange:re})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"Risk Level"}),e.jsxs(r.Select,{onChange:a=>ne(a.target.value),value:y,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"KYC Status"}),e.jsxs(r.Select,{onChange:a=>ie(a.target.value),value:D,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:!0,children:"Verified"}),e.jsx("option",{value:!1,children:"Unverified"})]})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"Registration Status"}),e.jsxs(r.Select,{onChange:a=>ce(a.target.value),value:k,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:!1,children:"Incomplete"}),e.jsx("option",{value:!0,children:"Completed"})]})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"KYC Verified By"}),e.jsxs(r.Select,{onChange:a=>de(a.target.value),value:w,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:!0,children:"Digitally"}),e.jsx("option",{value:!1,children:"Manually"})]})]})]}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"No of transaction"}),e.jsxs(r.Select,{onChange:a=>he(a.target.value),value:T,children:[e.jsx("option",{value:"0",children:"0"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"10+",children:"10+"})]})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"Active status"}),e.jsxs(r.Select,{onChange:a=>me(a.target.value),value:A,children:[e.jsx("option",{value:0,children:"All"}),e.jsx("option",{value:365,children:"Active in last 365 days"}),e.jsx("option",{value:180,children:"Active in last 180 days"}),e.jsx("option",{value:90,children:"Active in last 90 days"}),e.jsx("option",{value:30,children:"Active in last 30 days"}),e.jsx("option",{value:0,children:"Not active in last 365 days"})]})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("div",{className:"font-weight-normal m-2 labelCard",children:"User type"}),e.jsxs(r.Select,{onChange:a=>pe(a.target.value),value:Y,children:[e.jsx("option",{value:0,children:"All"}),e.jsx("option",{value:2,children:"Individual"}),e.jsx("option",{value:3,children:"Business"}),e.jsx("option",{value:4,children:"Agent"})]})]})]})]}),e.jsxs("div",{className:"row d-flex justify-content-end mt-3 border-top",children:[e.jsx("div",{className:"col-lg-2",children:e.jsx(C,{className:"m-0 mt-3",variant:"contained",color:"primary",onClick:()=>fe(),children:"Filter"})}),e.jsx("div",{className:"col-lg-2",children:e.jsx(C,{className:"m-0 mt-3",variant:"outlined",onClick:N,children:"Close"})})]})]})})]})})})]})}export{Ha as default};
