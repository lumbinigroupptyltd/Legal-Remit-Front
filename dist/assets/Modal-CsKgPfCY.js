import{u as A,a as v,e as Ge}from"./ThemeProvider-BovkV_tw.js";import{c as he,o as be,l as ye,r as Me,a as ze}from"./listen-DOhMskc_.js";import{u as ke,c as Re,a as Ve}from"./useWindow-BRfE8g8U.js";import{u as p}from"./useEventCallback-BAoW58St.js";import{u as Xe}from"./useMergedRefs-CC2NoeT3.js";import{u as Ne}from"./useWillUnmount-B2faAFH4.js";import{s as $,t as Ye}from"./TransitionWrapper-hzIxZzZF.js";import{r as i,j as d,aN as qe}from"./index-CZLZpOaH.js";import{u as Je}from"./useMounted-_Ax2eNue.js";import{u as Qe}from"./usePrevious-DSHR52O9.js";import{d as Ze,q as S}from"./DataKey-COGXBUcQ.js";import{u as Pe,i as et,r as Te}from"./ImperativeTransition-r3w4KPGy.js";import{a as tt,r as ot}from"./removeClass-loOrDRrx.js";import{F as Oe}from"./Fade-C3nPY4By.js";import{C as nt}from"./CloseButton-BaMgJgcS.js";import{d as rt}from"./divWithClassName-BYsY4_Vt.js";var P;function we(o){if((!P&&P!==0||o)&&he){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),P=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return P}function ue(o){o===void 0&&(o=be());try{var e=o.activeElement;return!e||!e.nodeName?null:e}catch{return o.body}}function at(o=document){const e=o.defaultView;return Math.abs(e.innerWidth-o.documentElement.clientWidth)}const Ce=Ze("modal-open");class ge{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}={}){this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return at(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt($(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Ce,""),$(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Ce),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const st=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function it(o,e){if(o==null)return{};var t={},n=Object.keys(o),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=o[r]);return t}let fe;function lt(o){return fe||(fe=new ge({ownerDocument:o==null?void 0:o.document})),fe}function dt(o){const e=ke(),t=o||lt(e),n=i.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>t.add(n.current),remove:()=>t.remove(n.current),isTopModal:()=>t.isTopModal(n.current),setDialogRef:i.useCallback(r=>{n.current.dialog=r},[]),setBackdropRef:i.useCallback(r=>{n.current.backdrop=r},[])})}const xe=i.forwardRef((o,e)=>{let{show:t=!1,role:n="dialog",className:r,style:s,children:E,backdrop:f=!0,keyboard:y=!0,onBackdropClick:T,onEscapeKeyDown:m,transition:D,runTransition:M,backdropTransition:w,runBackdropTransition:ee,autoFocus:K=!0,enforceFocus:te=!0,restoreFocus:C=!0,restoreFocusOptions:oe,renderDialog:U,renderBackdrop:ne=l=>d.jsx("div",Object.assign({},l)),manager:re,container:ae,onShow:G,onHide:F=()=>{},onExit:se,onExited:L,onExiting:z,onEnter:V,onEntering:X,onEntered:Y}=o,ie=it(o,st);const h=ke(),b=Pe(ae),c=dt(re),le=Je(),q=Qe(t),[R,k]=i.useState(!t),u=i.useRef(null);i.useImperativeHandle(e,()=>c,[c]),he&&!q&&t&&(u.current=ue(h==null?void 0:h.document)),t&&R&&k(!1);const g=p(()=>{if(c.add(),N.current=ye(document,"keydown",ce),I.current=ye(document,"focus",()=>setTimeout(de),!0),G&&G(),K){var l,Z;const _=ue((l=(Z=c.dialog)==null?void 0:Z.ownerDocument)!=null?l:h==null?void 0:h.document);c.dialog&&_&&!Re(c.dialog,_)&&(u.current=_,c.dialog.focus())}}),W=p(()=>{if(c.remove(),N.current==null||N.current(),I.current==null||I.current(),C){var l;(l=u.current)==null||l.focus==null||l.focus(oe),u.current=null}});i.useEffect(()=>{!t||!b||g()},[t,b,g]),i.useEffect(()=>{R&&W()},[R,W]),Ne(()=>{W()});const de=p(()=>{if(!te||!le()||!c.isTopModal())return;const l=ue(h==null?void 0:h.document);c.dialog&&l&&!Re(c.dialog,l)&&c.dialog.focus()}),J=p(l=>{l.target===l.currentTarget&&(T==null||T(l),f===!0&&F())}),ce=p(l=>{y&&et(l)&&c.isTopModal()&&(m==null||m(l),l.defaultPrevented||F())}),I=i.useRef(),N=i.useRef(),Q=(...l)=>{k(!0),L==null||L(...l)};if(!b)return null;const O=Object.assign({role:n,ref:c.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},ie,{style:s,className:r,tabIndex:-1});let H=U?U(O):d.jsx("div",Object.assign({},O,{children:i.cloneElement(E,{role:"document"})}));H=Te(D,M,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:se,onExiting:z,onExited:Q,onEnter:V,onEntering:X,onEntered:Y,children:H});let x=null;return f&&(x=ne({ref:c.setBackdropRef,onClick:J}),x=Te(w,ee,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:x})),d.jsx(d.Fragment,{children:qe.createPortal(d.jsxs(d.Fragment,{children:[x,H]}),b)})});xe.displayName="Modal";const ct=Object.assign(xe,{Manager:ge}),j={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Be extends ge{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,$(t,{[e]:`${parseFloat($(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];n!==void 0&&(delete t.dataset[e],$(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(tt(t,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";S(t,j.FIXED_CONTENT).forEach(s=>this.adjustAndStore(n,s,e.scrollBarWidth)),S(t,j.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-e.scrollBarWidth)),S(t,j.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();ot(t,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";S(t,j.FIXED_CONTENT).forEach(s=>this.restore(n,s)),S(t,j.STICKY_CONTENT).forEach(s=>this.restore(r,s)),S(t,j.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let me;function ut(o){return me||(me=new Be(o)),me}const jt=Be,Se=i.forwardRef(({className:o,bsPrefix:e,as:t="div",...n},r)=>(e=A(e,"modal-body"),d.jsx(t,{ref:r,className:v(o,e),...n})));Se.displayName="ModalBody";const je=i.createContext({onHide(){}}),pe=i.forwardRef(({bsPrefix:o,className:e,contentClassName:t,centered:n,size:r,fullscreen:s,children:E,scrollable:f,...y},T)=>{o=A(o,"modal");const m=`${o}-dialog`,D=typeof s=="string"?`${o}-fullscreen-${s}`:`${o}-fullscreen`;return d.jsx("div",{...y,ref:T,className:v(m,e,r&&`${o}-${r}`,n&&`${m}-centered`,f&&`${m}-scrollable`,s&&D),children:d.jsx("div",{className:v(`${o}-content`,t),children:E})})});pe.displayName="ModalDialog";const Ae=i.forwardRef(({className:o,bsPrefix:e,as:t="div",...n},r)=>(e=A(e,"modal-footer"),d.jsx(t,{ref:r,className:v(o,e),...n})));Ae.displayName="ModalFooter";const ft=i.forwardRef(({closeLabel:o="Close",closeVariant:e,closeButton:t=!1,onHide:n,children:r,...s},E)=>{const f=i.useContext(je),y=p(()=>{f==null||f.onHide(),n==null||n()});return d.jsxs("div",{ref:E,...s,children:[r,t&&d.jsx(nt,{"aria-label":o,variant:e,onClick:y})]})}),De=i.forwardRef(({bsPrefix:o,className:e,closeLabel:t="Close",closeButton:n=!1,...r},s)=>(o=A(o,"modal-header"),d.jsx(ft,{ref:s,...r,className:v(e,o),closeLabel:t,closeButton:n})));De.displayName="ModalHeader";const mt=rt("h4"),Fe=i.forwardRef(({className:o,bsPrefix:e,as:t=mt,...n},r)=>(e=A(e,"modal-title"),d.jsx(t,{ref:r,className:v(o,e),...n})));Fe.displayName="ModalTitle";function ht(o){return d.jsx(Oe,{...o,timeout:null})}function gt(o){return d.jsx(Oe,{...o,timeout:null})}const Le=i.forwardRef(({bsPrefix:o,className:e,style:t,dialogClassName:n,contentClassName:r,children:s,dialogAs:E=pe,"data-bs-theme":f,"aria-labelledby":y,"aria-describedby":T,"aria-label":m,show:D=!1,animation:M=!0,backdrop:w=!0,keyboard:ee=!0,onEscapeKeyDown:K,onShow:te,onHide:C,container:oe,autoFocus:U=!0,enforceFocus:ne=!0,restoreFocus:re=!0,restoreFocusOptions:ae,onEntered:G,onExit:F,onExiting:se,onEnter:L,onEntering:z,onExited:V,backdropClassName:X,manager:Y,...ie},h)=>{const[b,c]=i.useState({}),[le,q]=i.useState(!1),R=i.useRef(!1),k=i.useRef(!1),u=i.useRef(null),[g,W]=Ve(),de=Xe(h,W),J=p(C),ce=Ge();o=A(o,"modal");const I=i.useMemo(()=>({onHide:J}),[J]);function N(){return Y||ut({isRTL:ce})}function Q(a){if(!he)return;const B=N().getScrollbarWidth()>0,Ee=a.scrollHeight>be(a).documentElement.clientHeight;c({paddingRight:B&&!Ee?we():void 0,paddingLeft:!B&&Ee?we():void 0})}const O=p(()=>{g&&Q(g.dialog)});Ne(()=>{Me(window,"resize",O),u.current==null||u.current()});const H=()=>{R.current=!0},x=a=>{R.current&&g&&a.target===g.dialog&&(k.current=!0),R.current=!1},l=()=>{q(!0),u.current=Ye(g.dialog,()=>{q(!1)})},Z=a=>{a.target===a.currentTarget&&l()},_=a=>{if(w==="static"){Z(a);return}if(k.current||a.target!==a.currentTarget){k.current=!1;return}C==null||C()},We=a=>{ee?K==null||K(a):(a.preventDefault(),w==="static"&&l())},Ie=(a,B)=>{a&&Q(a),L==null||L(a,B)},He=a=>{u.current==null||u.current(),F==null||F(a)},_e=(a,B)=>{z==null||z(a,B),ze(window,"resize",O)},$e=a=>{a&&(a.style.display=""),V==null||V(a),Me(window,"resize",O)},Ke=i.useCallback(a=>d.jsx("div",{...a,className:v(`${o}-backdrop`,X,!M&&"show")}),[M,X,o]),ve={...t,...b};ve.display="block";const Ue=a=>d.jsx("div",{role:"dialog",...a,style:ve,className:v(e,o,le&&`${o}-static`,!M&&"show"),onClick:w?_:void 0,onMouseUp:x,"data-bs-theme":f,"aria-label":m,"aria-labelledby":y,"aria-describedby":T,children:d.jsx(E,{...ie,onMouseDown:H,className:n,contentClassName:r,children:s})});return d.jsx(je.Provider,{value:I,children:d.jsx(ct,{show:D,ref:de,backdrop:w,container:oe,keyboard:!0,autoFocus:U,enforceFocus:ne,restoreFocus:re,restoreFocusOptions:ae,onEscapeKeyDown:We,onShow:te,onHide:C,onEnter:Ie,onEntering:_e,onEntered:G,onExit:He,onExiting:se,onExited:$e,manager:N(),transition:M?ht:void 0,backdropTransition:M?gt:void 0,renderBackdrop:Ke,renderDialog:Ue})})});Le.displayName="Modal";const At=Object.assign(Le,{Body:Se,Header:De,Title:Fe,Footer:Ae,Dialog:pe,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});export{ft as A,ct as B,At as M,je as a,jt as b,ut as g};
