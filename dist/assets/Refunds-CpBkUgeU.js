import{r as t,R as m,j as e,b as h}from"./index-CZLZpOaH.js";import{P as de}from"./PageHeader-6CScOhCz.js";import{C as n}from"./common.constants-BAKO8LyS.js";import{d as me}from"./RemoveRedEye-CUxvqEwQ.js";import{h as _}from"./moment-CAEcp8GN.js";import{d as A}from"./Close-Dzfaz63K.js";import{N as he}from"./NoRecordWithAddBtn-DmeiGlWH.js";import{L as pe}from"./Loader-BUXOLHKX.js";import{M as F}from"./ModalComponent-Can9sfzz.js";import{M as ue}from"./ModalComponentPopup-D_u4dGYC.js";import{F as xe}from"./Form-ExWjSL5Y.js";import{P as fe}from"./Pagination-DBwceeB_.js";import{M as I}from"./Modal-Cgbm8Po3.js";import{B}from"./Box-Jn0s_-VR.js";import{B as y}from"./Button-CasUi-tz.js";import"./DashbordData-n50t2wKP.js";import"./createSvgIcon-BXb30exD.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ownerWindow-B35kT-qP.js";import"./useId-BCOK0MJf.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./useControlled-CSwFU9cf.js";import"./Modal-CsKgPfCY.js";import"./ThemeProvider-BovkV_tw.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./index-tz1zYP65.js";import"./divWithClassName-BYsY4_Vt.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";import"./ButtonBase-Dp3TaUiU.js";import"./assertThisInitialized-B9jnkVVz.js";import"./isHostComponent-D6l1mxjA.js";import"./Portal-BnZs0see.js";function fs(){t.useState(!1);const[i,L]=m.useState(n.DefaultPageSize),[l,x]=m.useState(1),[o,T]=t.useState([]),[Y,w]=t.useState(!1),[p,q]=m.useState(""),[W,C]=t.useState(!1),[u,H]=m.useState(0),[U,$]=m.useState(0),[r,V]=t.useState({id:0,haveCustomerId:!1,customerId:"",userId:0,fullName:"",email:"",phone:"",haveTransactionNo:!0,transactionNo:"",reason:"",createdAt:"",updatedAt:"",deleted:!1}),[O,M]=t.useState(!1),[z,f]=t.useState(!1),[c,d]=t.useState(""),[X,D]=t.useState(!1),[j,k]=t.useState(0),[G,E]=t.useState(!1),[J,K]=t.useState(!1),[Q,N]=t.useState(!1),[P,g]=t.useState(!1),Z=async s=>{const a=s.target.value,ce=j;try{a&&((await h.get(n.NEW_BASE_URL+"/validatetransactionrequest",{params:{refundRequestId:ce,transactionNo:a}})).data.data==!1?g(!0):g(!1))}catch(R){console.error(R)}},ee=()=>{N(!1)},se=async(s,a)=>{d(a),k(s),N(!0)},ae=s=>{const a=s.target.value;q(a),M(o.length>0||a.trim()!=="")},v=()=>{w(!1)},te=async s=>{await h.post(n.NEW_BASE_URL+"/gettransactionrefundrequestbyid",{id:s}).then(a=>{a.data.status==!0&&(V(a.data.data),w(!0))})},b=async()=>{C(!0);const s={pageindex:l,pagesize:i,searchdata:p};await h.post(n.NEW_BASE_URL+"/getalltransactionrefundrequest",s).then(a=>{T(a.data.data),$(a.data.totalPageCount),H(a.data.recordCount),M(a.data.recordCount==0?p!="":!0)}).catch(a=>{console.log(a)}),C(!1)},oe=s=>{L(Number(s.target.value)),x(1)},re=(s,a)=>{a==l,x(a)},S=()=>{D(!1),f(!1),d(""),g(!1)},le=async(s,a)=>{k(s),f(!0)},ne=async()=>{if(!c)D(!0);else{const s=new FormData;s.append("id",j),s.append("status",1),s.append("transactionNo",c),(await h.post(n.NEW_BASE_URL+"/updaterequeststatus",s)).data.status==!0&&(f(!1),b(),d(""))}},ie=async()=>{N(!1);const s=new FormData;s.append("id",j),s.append("status",2),s.append("transactionNo",c),(await h.post(n.NEW_BASE_URL+"/updaterequeststatus",s)).data.status==!0&&(b(),E(!0),d(""))};return t.useEffect(()=>{b()},[p,i,l]),e.jsxs(e.Fragment,{children:[W==!0?e.jsx(pe,{}):"",e.jsxs("div",{className:"container-fluid",onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[e.jsx(de,{HeaderText:"Refunds",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"body project_report",children:[e.jsxs("div",{className:"table-responsive",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter ",children:[o&&o.length>0&&e.jsxs("div",{className:"filter-row pb-2 ",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center pbSt",children:e.jsx(xe.Select,{name:"tbl_meeting_length",onChange:oe,value:i,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:n.show_rows.map(s=>e.jsx("option",{value:s,children:s}))})})]}),e.jsxs("div",{className:"d-flex align-items-center respoChildFooter",children:[O&&e.jsxs("div",{className:"form-group d-flex align-items-center mb-0",children:[e.jsx("label",{className:"font-weight-normal mb-0",children:"Search: "}),"   ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 px-3 ",placeholder:"",value:p,onChange:ae})]}),"  "]})]}),e.jsx("div",{className:"row"}),o&&o.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table m-b-0 table-hover mt-3",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Customer Id"}),e.jsx("th",{children:"Transaction Number"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.fullName==null?"-":s.fullName}),e.jsx("td",{children:s.email==""?"-":s.email}),e.jsx("td",{children:s.phone==""?"-":s.phone}),e.jsx("td",{children:s.customerId==""?"-":s.customerId}),e.jsx("td",{children:s.transactionNo===void 0||s.transactionNo==="undefined"?"-":s.transactionNo}),e.jsx("td",{children:_(s.createdAt).format("YYYY-MM-DD")}),e.jsxs("td",{className:"project-actions",children:[s.status==0&&e.jsxs(e.Fragment,{children:[e.jsx("a",{className:"bg-transparent px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>le(s.id,s.transactionNo),children:e.jsx("i",{class:"fa fa-check","aria-hidden":"true",style:{color:"green"},title:"Accept"})}),"",e.jsx("a",{className:"bg-transparent px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>se(s.id,s.transactionNo),children:e.jsx("i",{class:"fa fa-times","aria-hidden":"true",style:{color:"red"},title:"Reject"})})]}),"",e.jsx("a",{className:"btn btn-outline-secondary mr-1",title:"View",onClick:()=>te(s.id),children:e.jsx(me,{})})," "," "]})]}))})]})}):e.jsx(he,{})]}),o&&o.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2",children:u>0?`Showing ${(l-1)*i+1} to ${l*i>u?u:l*i} of ${u} entries`:"No records Available"}),e.jsx(fe,{count:U,className:"pbDowSt pbSt",page:l,onChange:re,color:"secondary",shape:"rounded"})]})]})})})})]}),e.jsx(I,{open:Y,onClose:v,children:e.jsxs(B,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",width:{xs:"90%",sm:"70%",md:"50%",lg:"40%"},paddingBottom:"20px"},children:[e.jsxs("div",{className:"border-bottom py-2 mb-4 d-flex justify-content-between",children:[e.jsx("h5",{children:"Details"}),e.jsx("div",{onClick:v,className:"pointer",children:e.jsx(A,{})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"my-2",children:e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Full Name : "}),e.jsxs("div",{className:"",children:[r.fullName," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Email : "}),e.jsxs("div",{className:" ",style:{overflowWrap:"break-word"},children:[r.email," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Mobile : "}),e.jsxs("div",{className:"",children:[r.phone," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Customer Id : "}),e.jsxs("div",{className:"",children:[r.customerId==""?"-":r.customerId," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Transaction Number : "}),e.jsxs("div",{className:"",children:[r.transactionNo," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Reason for refund : "}),e.jsxs("div",{className:"",children:[r.reason," "]})]}),e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6",children:" Date : "}),e.jsxs("div",{className:"",children:[_(r.createdAt).format("YYYY-MM-DD")," "]})]})]})})})}),e.jsx("div",{className:"row d-flex justify-content-end mt-3 border-top",children:e.jsx("div",{className:"col-lg-3",children:e.jsx(y,{className:"m-0 mt-3",variant:"outlined",onClick:v,children:"Close"})})})]})}),e.jsx(F,{show:G,title11:"Reject successfully",onHide:()=>E(!1)}),e.jsx(F,{show:J,title11:"Please provid proper details!",onHide:()=>K(!1)}),e.jsx(ue,{show:Q,title1:"Are you sure want to reject this requset ?",cancle:s=>ee(),SavePr:()=>ie()}),e.jsx(I,{open:z,onClose:S,children:e.jsxs(B,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",width:{xs:"20%",sm:"30%",md:"30%",lg:"30%"},paddingBottom:"20px",height:"400px"},children:[e.jsxs("div",{className:" border-bottom py-2 mb-4 d-flex justify-content-between",children:[e.jsx("h5",{children:"Confirmation"})," ",e.jsx("div",{onClick:S,className:"pointer",children:e.jsx(A,{})})]}),e.jsx("div",{className:"row viewModal",children:e.jsxs("div",{className:"my-2",children:[e.jsx("ul",{className:"list-unstyled",children:e.jsxs("li",{className:"py-2 d-flex",children:[e.jsx("div",{className:"font-weight-normal col-lg-6 mt-3",children:"Transaction Number : "}),e.jsxs("div",{className:" w-100",children:[e.jsx("input",{type:"text",className:"form-control w-100",placeholder:"transaction number",onChange:s=>{const a=s.target.value;d(a)},value:c,onBlur:s=>Z(s)}),X&&!c&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error checkboxError",children:"Please Enter Transaction Number"}),P&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error checkboxError",children:"Please Enter Valid Transaction Number"})]})]})}),e.jsxs("div",{className:"row d-flex justify-content-end mt-3",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx(y,{className:"m-0 mt-3",variant:"contained",color:"primary",onClick:ne,disabled:P,children:"Submit"})}),e.jsx("div",{className:"col-lg-3",children:e.jsx(y,{className:"m-0 mt-3",variant:"outlined",onClick:S,children:"Close"})})]})]})})]})})]})}export{fs as default};
