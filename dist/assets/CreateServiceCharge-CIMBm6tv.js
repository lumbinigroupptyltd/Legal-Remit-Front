import{r as y,y as xr,b as $,j as a}from"./index-CZLZpOaH.js";import{T as Y,a as T}from"./Tabs-CzjSRZ0v.js";import{M as ee}from"./ModalComponent-Can9sfzz.js";import{C as I}from"./common.constants-BAKO8LyS.js";import{h as Fe}from"./moment-CAEcp8GN.js";import{C as ae}from"./Container-D9at3elR.js";import{R as S}from"./Row-q1SNRrbp.js";import{F as c}from"./Form-ExWjSL5Y.js";import{C as b}from"./Col-BflThe67.js";import"./index-tz1zYP65.js";import"./hook-BunR6YGu.js";import"./SSRProvider-B1aayNdq.js";import"./Nav-sK5urYj2.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-iw-sc-NQ.js";import"./useMergedRefs-CC2NoeT3.js";import"./useEventCallback-BAoW58St.js";import"./Button-wtvkehlk.js";import"./NoopTransition-DCT8I71y.js";import"./ThemeProvider-BovkV_tw.js";import"./NavbarContext-BEl9KYy_.js";import"./CardHeaderContext-B_y6kemd.js";import"./Anchor-BcSSV2GN.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./Fade-C3nPY4By.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./TransitionWrapper-hzIxZzZF.js";import"./listen-DOhMskc_.js";import"./ElementChildren-DV238mrs.js";import"./Modal-CsKgPfCY.js";import"./useWindow-BRfE8g8U.js";import"./useWillUnmount-B2faAFH4.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./ImperativeTransition-r3w4KPGy.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./CloseButton-BaMgJgcS.js";import"./divWithClassName-BYsY4_Vt.js";function ft(Le){const[De,Ae]=y.useState("pay1");y.useState(new Date),y.useState();const[w,ha]=y.useState([]),[F,ma]=y.useState([]),[Ue,re]=y.useState(0),[$e,te]=y.useState(0);y.useState([{lowerbound:0,upperbound:0,charge:0}]);const[Te,fr]=y.useState(Le.location.state),[Z,ga]=y.useState([]),[se,ba]=y.useState(null),[va,xa]=y.useState(!1),[fa,ja]=y.useState(!1),[ne,Ie]=y.useState(0),[oe,Pe]=y.useState(0),[le,Ee]=y.useState(0),[jr,Oe]=y.useState(0),[Cr,Ge]=y.useState(0),[Sr,ke]=y.useState(0),[wr,Re]=y.useState(0),[Nr,Me]=y.useState(0),[Br,Je]=y.useState(0),[_,Ke]=y.useState(14),[He,Ye]=y.useState(154),[de,_e]=y.useState("AUD"),[ce,Ve]=y.useState("NPR"),pe=new Date,Ca=`${pe.getFullYear()}-${pe.getMonth()+1}-${pe.getDate()}`,[ie,Fr]=y.useState(Ca),[Sa,wa]=y.useState([]),[E,Lr]=y.useState([]),[Na,Ba]=y.useState([]),[O,Dr]=y.useState([]),[ue,Ze]=y.useState(""),[ye,ze]=y.useState(""),[he,qe]=y.useState(""),[me,Qe]=y.useState(""),[ge,We]=y.useState(""),[be,Xe]=y.useState(""),[ve,ea]=y.useState(""),[xe,aa]=y.useState("");y.useState(0);const[Fa,V]=y.useState(0),[La,Da]=y.useState(0),[fe,je]=y.useState(0),[Ce,Se]=y.useState("0");y.useState({}),y.useState([]);const[Ar,ra]=y.useState([]),[Ur,ta]=y.useState(""),[$r,sa]=y.useState([]),[Aa,na]=y.useState(ie),we=xr(),[oa,la]=y.useState("0"),[da,ca]=y.useState("0"),[Ua,$a]=y.useState(1);y.useEffect(()=>{ba(Le.location.state),Ta(),Pa(),Ea(),Oa()},[]);const Ta=()=>{$.get(`${I.BASE_URL}/getallcountries`).then(r=>{ga(r.data.data)}).catch(r=>{console.log(r)})},Ia=r=>{const n=r.target.value.replace(/\D/g,"").slice(0,8);let t="";n.length>4?(t+=n.slice(0,4)+"-",n.length>6?(t+=n.slice(4,6)+"-",t+=n.slice(6)):t+=n.slice(4)):t=n,na(t)},Pa=async()=>{try{const t={pageindex:1,pagesize:5,searchdata:"%%",sortparam:"created_at",sortorder:"ASC"},e=await $.get(I.BASE_URL+"/getallpaymentmethodname ");if(e.data.status===!0){Ze(e.data.data[0].name),ze(e.data.data[0].id),We(e.data.data[0].name),Xe(e.data.data[0].id);const s=e.data.data.map(l=>({value:l.id,label:l.name}));ha(s);const d=w.filter((l,h)=>Number(s)===Ua),o=[];v.map((l,h)=>{d[0].value===l.typeid&&o.push(l)});var r=[],n=[];s.map((l,h)=>{n.push({ArrayofIndex:h,ArrayPayment:1,LowerBound:"0",UpperBound:"0",FixFees:"0",OurFees:"0",charge:"0",TypeRate:"amount",type:l.label,typeid:l.value}),r.push({name:l.label,Uppervalue:"0"})}),G(n)}}catch(t){console.log(t)}},Ea=async()=>{try{const n={countryId:_},t=await $.get(I.BASE_URL+"/getactivedeliverytype ");if(t.data.status===!0){qe(t.data.data[0].type),Qe(t.data.data[0].id),ea(t.data.data[0].type),aa(t.data.data[0].id);const e=t.data.data.map(s=>({id:s.id,labelDelivery:s.type}));ma(e);var r=[];e.map((s,d)=>{r.push({ArrayofIndex:d,ArrayPayment:1,LowerBound:"0",UpperBound:"0",FixFees:"0",OurFees:"0",charge:"0",TypeRate:"amount",type:s.labelDelivery,typeid:s.id})}),R(r)}}catch(n){console.log(n)}},Oa=async()=>{const r={countryId:_},n=await $.post(I.BASE_URL+"/getallactivedeliverymethods",r);n.data.status===!0&&n.data.data.map(s=>({id:s.id,labelDelivery:s.deliveryTypeName}));const t={countryId:_},e=await $.post(I.BASE_URL+"/getpaymentmethods",t);if(e.data.status===!0&&e.data.data.map(s=>({value:s.id,label:s.name})),!se){const s={id:Te};await $.post(`${I.BASE_URL}/getservicechargebyid`,s).then(d=>{_e(d.data.data.fromCurrencyCode),Ve(d.data.data.toCurrencyCode),na(Fe(d.data.data.validFrom).format("YYYY-MM-DD")),Ie(d.data.data.serviceCharge),Pe(d.data.data.minimumTransaction),Ee(d.data.data.maximumTransaction),wa(JSON.parse(d.data.data.deliveryMethodCharges)),Ba(JSON.parse(d.data.data.paymentMethodCharges)),Ke(d.data.data.fromCountryId),Ye(d.data.data.toCountryId);let o=JSON.parse(d.data.data.paymentMethodCharges),l=0,h=0;const m=o.flatMap((g,N)=>g.range.map((p,u)=>({ArrayofIndex:l++,typeid:g.typeid,type:g.type,LowerBound:`${p.lower}`,UpperBound:`${p.upper}`,FixFees:`${p.fixfees}`,OurFees:`${p.ourfees}`,charge:`${p.charge}`,TypeRate:`${p.type}`}))).reduce((g,N)=>{const p=N.type;return g[p]||(g[p]=[]),g[p].push(N),g},[]);var x={},A=[];Object.keys(m).forEach(g=>{x[g.type]||(x[g.type]=[]),m[g].forEach((N,p)=>{N.ArrayPayment=p+1,A.push(N)})}),M(A);const X=JSON.parse(d.data.data.deliveryMethodCharges).flatMap((g,N)=>g.range.map((p,u)=>({ArrayofIndex:h++,ArrayPayment:1,typeid:g.typeid,type:g.type,LowerBound:`${p.lower}`,UpperBound:`${p.upper}`,charge:`${p.charge}`,TypeRate:`${p.type}`}))).reduce((g,N)=>{const p=N.type;return g[p]||(g[p]=[]),g[p].push(N),g},[]);var H={},D=[];Object.keys(X).forEach(g=>{H[g.type]||(H[g.type]=[]),X[g].forEach((N,p)=>{N.ArrayPayment2=p+1,D.push(N)})}),K(D);var Ne,Be;re(Ne),te(Be)}).catch(d=>{console.log("err",d)})}},Ga=async r=>{let n=or(r),t=rr(r);var e=v.filter((x,A)=>x.UpperBound==="0"),s=f.filter((x,A)=>x.UpperBound==="0");if(e.length==0&&s.length==0){var d=v.filter((x,A)=>Number(x.LowerBound)>Number(x.UpperBound)),o=f.filter((x,A)=>Number(x.LowerBound)>Number(x.UpperBound));if(d.length==0&&o.length==0){var l=[],h=[];for(let u=0;u<E.length;u++){const B=JSON.parse(E[u]);l.push(B.type)}F.filter(u=>!l.includes(u.labelDelivery)).map(u=>{var B=`{"type": "${u==null?void 0:u.labelDelivery}","range":[ { "lower":0 ,"upper": 0 ,"charge":0,"type":"amount"}]}`;E.push(B)});for(let u=0;u<O.length;u++){const B=JSON.parse(O[u]);h.push(B.type)}w.filter(u=>!h.includes(u.label)).map(u=>{var B=`{"type": "${u==null?void 0:u.label}","range":[ { "lower":0 ,"upper": 0 ,"charge":0,"type":"amount"}]}`;O.push(B)});const U={};n.map(u=>JSON.parse(u)).forEach(u=>{const B=`${u.type}_${u.typeid}`;U[B]||(U[B]={...u,range:[]}),U[B].range=U[B].range.concat(u.range)});const H=Object.values(U).map(u=>JSON.stringify(u)),D={};t.map(u=>JSON==null?void 0:JSON.parse(u)).forEach(u=>{const B=`${u.type}_${u.typeid}`;D[B]||(D[B]={...u,range:[]}),D[B].range=D[B].range.concat(u.range)});const g=Object.values(D).map(u=>JSON.stringify(u));var i=H.map(u=>u.replace(/\\/g,"")),m=g.map(u=>u.replace(/\\/g,""));const N=Fe(ie).format("YYYY-MM-DD"),p={fromCountryId:_,toCountryId:He,fromCurrencyCode:de,toCurrencyCode:ce,serviceCharge:ne,paymentMethodCharges:"["+m.toString()+"]",deliveryMethodCharges:"["+i.toString()+"]",validFrom:N,minimumTransaction:oe,maximumTransaction:le};await $.post(`${I.BASE_URL}/addservicecharges`,p).then(u=>{u.data.statuscode==200&&xa(!0)}).catch(u=>{console.log("err",u)})}else L(!0)}else P(!0)},ka=async r=>{const n=cr(r),t=yr(r);var e=j.filter((x,A)=>x.UpperBound==="0"),s=C.filter((x,A)=>x.UpperBound==="0");if(e.length==0&&s.length==0){var d=j.filter((x,A)=>Number(x.LowerBound)>Number(x.UpperBound)),o=C.filter((x,A)=>Number(x.LowerBound)>Number(x.UpperBound));if(d.length==0&&o.length==0){var l=[],h=[];for(let p=0;p<E.length;p++){const u=JSON.parse(E[p]);l.push(u.type)}Sa.filter(p=>!l.includes(p.type)).map(p=>{var u=`{"type": "${p==null?void 0:p.type}","range":[ { "lower":${parseFloat(p.range[0].lower)} ,"upper": ${parseFloat(p.range[0].upper)} ,"charge":${parseFloat(p.range[0].charge)},"type":"percentage"}]}`;E.push(u)});for(let p=0;p<O.length;p++){const u=JSON.parse(O[p]);h.push(u.type)}Na.filter(p=>!h.includes(p.type)).map(p=>{var u=`{"type": "${p==null?void 0:p.type}","range":[ { "lower":${parseFloat(p.range[0].lower)} ,"upper": ${parseFloat(p.range[0].upper)} ,"charge":${parseFloat(p.range[0].charge)},"type":"percentage"}]}`;O.push(u)});const U={};t.map(p=>JSON.parse(p)).forEach(p=>{const u=`${p.type}_${p.typeid}`;U[u]||(U[u]={...p,range:[]}),U[u].range=U[u].range.concat(p.range)});const H=Object.values(U).map(p=>JSON.stringify(p)),D={};n.map(p=>JSON.parse(p)).forEach(p=>{const u=`${p.type}_${p.typeid}`;D[u]||(D[u]={...p,range:[]}),D[u].range=D[u].range.concat(p.range)});var i=Object.values(D).map(p=>JSON.stringify(p)).map(p=>p.replace(/\\/g,"")),m=H.map(p=>p.replace(/\\/g,""));const N={id:Te,fromCountryId:_,toCountryId:He,fromCurrencyCode:de,toCurrencyCode:ce,serviceCharge:ne,paymentMethodCharges:`[${i}]`,deliveryMethodCharges:`[${m}]`,validFrom:Fe(ie).format("YYYY-MM-DD"),minimumTransaction:oe,maximumTransaction:le};await $.post(`${I.BASE_URL}/updateservicecharge`,N).then(p=>{p.data.statuscode==200&&ja(!0)}).catch(p=>{console.log("err",p)})}else L(!0)}else P(!0)},Ra=r=>{_e(r.target.value);const n=Z.filter(t=>t.currency===r.target.value);Ke(n[0].id)},Ma=r=>{Ve(r.target.value);const n=Z.filter(t=>t.currency===r.target.value);Ye(n[0].id)},pa=()=>{we("/service-charge")},Ja=r=>{re(r),Re(0),Me(0),Je(0),qe(F[r].labelDelivery),Qe(F[r].id);const n=F.filter((d,o)=>Number(r)===o);sa(n);const t=[];f.map((d,o)=>{var l;((l=n[0])==null?void 0:l.id)===d.typeid&&t.push(d)});const e=t[(t==null?void 0:t.length)-1],s=(e==null?void 0:e.UpperBound)==null?"":e==null?void 0:e.UpperBound;ca(s)},Ka=(r,n)=>{te(r),Oe(0),Ge(0),ke(0),Ze(w[r].label),ze(w[r].value);const t=w.filter((o,l)=>Number(r)===l);sa(t);const e=[];v.map((o,l)=>{var h;((h=t[0])==null?void 0:h.value)===o.typeid&&e.push(o)});const s=e[(e==null?void 0:e.length)-1],d=(s==null?void 0:s.UpperBound)==null?"":s==null?void 0:s.UpperBound;la(d)},Ha=r=>{te(r),Oe(0),Ge(0),ke(0),We(w[r].label),Xe(w[r].value);const n=w.filter((d,o)=>Number(r)===o),t=[];j.map((d,o)=>{var l;((l=n[0])==null?void 0:l.value)===d.typeid&&t.push(d)});const e=t[(t==null?void 0:t.length)-1],s=(e==null?void 0:e.UpperBound)==null?"":e==null?void 0:e.UpperBound;je(s)},Ya=r=>{re(r),Re(0),Me(0),Je(0),ea(F[r].labelDelivery),aa(F[r].id);const n=F.filter((d,o)=>Number(r)===o),t=[];C.map((d,o)=>{var l;((l=n[0])==null?void 0:l.id)===d.typeid&&t.push(d)});const e=t[(t==null?void 0:t.length)-1],s=(e==null?void 0:e.UpperBound)==null?"":e==null?void 0:e.UpperBound;Se(s)},[v,G]=y.useState([]),[_a,P]=y.useState(!1),Va=r=>{const n=w.filter((e,s)=>Number(r)===s),t=[];if(v.map((e,s)=>{n[0].value===e.typeid&&t.push(e)}),!t.length==0)if(ia===!1){const e=w.filter((l,h)=>Number(r)===h),s=[];v.map((l,h)=>{e[0].value===l.typeid&&s.push(l)});const o=s[s.length-1].UpperBound;if(!Number(o)=="0"||!o===""){[...v].length==1?V(0):V("");let h={ArrayofIndex:"",ArrayPayment:(s==null?void 0:s.length)+1,LowerBound:`${oa!==""?parseInt(oa)+parseInt("1"):"0"}`,UpperBound:0,charge:0,FixFees:"0",OurFees:"0",TypeRate:"amount",type:ue,typeid:ye};G([...v,h])}else P(!0)}else L(!0);else{[...v].length==1?V(0):V("");let s={ArrayofIndex:"",ArrayPayment:1,LowerBound:"0",UpperBound:"0",charge:"0",FixFees:"0",OurFees:"0",TypeRate:"amount",type:ue,typeid:ye};G([...v,s])}},Za=r=>{for(let n=0;n<v.length;n++)v[n].ArrayofIndex=n,v[n].index=n},za=r=>{for(let n=0;n<f.length;n++)f[n].ArrayofIndex=n,f[n].index=n},qa=r=>{for(let n=0;n<j.length;n++)j[n].ArrayofIndex=n,j[n].index=n},Qa=r=>{for(let n=0;n<C.length;n++)C[n].ArrayofIndex=n,C[n].index=n},Wa=(r,n,t,e)=>{const s=w.filter((o,l)=>Number(r)===l),d=[];v.map((o,l)=>{s[0].value===o.typeid&&d.push(o)});for(let o=0;o<d.length;o++)if(d[o].ArrayofIndex===e){for(let l=0;l<v.length;l++)if(v[l]===d[o+1]&&l<v.length){const h={...v[l]};h.LowerBound=parseInt(t.target.value)+1,G(i=>{const m=[...i];return m[l]=h,m})}}},Xa=(r,n,t,e)=>{const s=F.filter((o,l)=>Number(r)===l),d=[];f.map((o,l)=>{s[0].id===o.typeid&&d.push(o)});for(let o=0;o<d.length;o++)if(d[o].ArrayofIndex===e){for(let l=0;l<f.length;l++)if(f[l]===d[o+1]&&l<f.length){const h={...f[l]};h.LowerBound=parseInt(t.target.value)+1,R(i=>{const m=[...i];return m[l]=h,m})}}},er=(r,n,t,e)=>{const s=w.filter((o,l)=>Number(r)===l),d=[];j.map((o,l)=>{s[0].value===o.typeid&&d.push(o)});for(let o=0;o<d.length;o++)if(d[o].ArrayofIndex===e){for(let l=0;l<j.length;l++)if(j[l]===d[o+1]&&l<j.length){const h={...j[l]};h.LowerBound=parseInt(t.target.value)+1,M(i=>{const m=[...i];return m[l]=h,m})}}},ar=(r,n,t,e)=>{const s=F.filter((o,l)=>Number(r)===l),d=[];C.map((o,l)=>{s[0].id===o.typeid&&d.push(o)});for(let o=0;o<d.length;o++)if(d[o].ArrayofIndex===e){for(let l=0;l<C.length;l++)if(C[l]===d[o+1]&&l<C.length){const h={...C[l]};h.LowerBound=parseInt(t.target.value)+1,K(i=>{const m=[...i];return m[l]=h,m})}}},k=(r,n,t)=>{let e=[...v],s=[...v],d=[...v];e[r][n.target.name]=n.target.value,s[r].type=ue,d[r].typeid=ye,G(e,s,d),e[r].LowerBound>e[r].UpperBound?ta(r):e[r].LowerBound<e[r].UpperBound&&ta("")},rr=r=>{r.preventDefault();const n=[],t=v.map(e=>{if(e.type==="Debit Card"||e.type==="Credit Card")var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} , "fixfees" :${(e==null?void 0:e.FixFees)==null||(e==null?void 0:e.FixFees)==""?0:e==null?void 0:e.FixFees} , "ourfees" :${e.OurFees==null||(e==null?void 0:e.OurFees)==""?0:e==null?void 0:e.OurFees} ,"charge":${e.charge==null||(e==null?void 0:e.charge)==""?0:e==null?void 0:e.charge},"type":"${e.TypeRate}"}]}`;else var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} , "charge":${e.charge==null||(e==null?void 0:e.charge)==""?0:e==null?void 0:e.charge},"type":"${e.TypeRate}"}]}`;n.push(s)});return JSON.stringify(t),n},tr=(r,n,t)=>{var e="",s=n;v.map((o,l)=>{(o==null?void 0:o.ArrayPayment)===n&&(o==null?void 0:o.type)===t&&(e=o.LowerBound)});const d=v.map((o,l)=>(o==null?void 0:o.type)===t?n+1===(o==null?void 0:o.ArrayPayment)?{...o,ArrayPayment:n,LowerBound:e}:n<(o==null?void 0:o.ArrayPayment)?(s=s+1,{...o,ArrayPayment:s}):o:o);d.splice(r,1),G(d)},[f,R]=y.useState([]),sr=r=>{const n=F.filter((e,s)=>Number(r)===s),t=[];if(f.map((e,s)=>{n[0].id===e.typeid&&t.push(e)}),!t.length==0)if(ua==!1){const e=F.filter((l,h)=>Number(r)===h),s=[];f.map((l,h)=>{e[0].id===l.typeid&&s.push(l)});const o=s[s.length-1].UpperBound;if(!Number(o)=="0"||!o===""){let l={ArrayofIndex:"",ArrayPayment:(s==null?void 0:s.length)+1,LowerBound:`${da!==""?parseInt(da)+parseInt("1"):"0"}`,UpperBound:"0",charge:"0",TypeRate:"amount",type:he,typeid:me};R([...f,l])}else P(!0)}else L(!0);else{let e={ArrayofIndex:"",ArrayPayment:1,LowerBound:"0",UpperBound:"0",charge:"0",TypeRate:"amount",type:he,typeid:me};R([...f,e])}},z=(r,n,t)=>{let e=[...f],s=[...f],d=[...f];e[r][n.target.name]=n.target.value,s[r].type=he,d[r].typeid=me,R(e,s,d)},[nr,L]=y.useState(!1),[ia,q]=y.useState(!1),[ua,Q]=y.useState(!1),or=r=>{r.preventDefault();const n=[],t=f.map(e=>{var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} ,"charge":${(e==null?void 0:e.charge)==null||(e==null?void 0:e.charge)==""?0:e.charge},"type":"${e.TypeRate}"}]}`;n.push(s)});return JSON.stringify(t),ra(n),n},lr=(r,n,t)=>{var e="",s=n;f.map((o,l)=>{(o==null?void 0:o.ArrayPayment)===n&&(o==null?void 0:o.type)===t&&(e=o.LowerBound)});const d=f.map((o,l)=>(o==null?void 0:o.type)===t?n+1===(o==null?void 0:o.ArrayPayment)?{...o,ArrayPayment:n,LowerBound:e}:n<(o==null?void 0:o.ArrayPayment)?(s=s+1,{...o,ArrayPayment:s}):o:o);d.splice(r,1),R(d)},[j,M]=y.useState([]),dr=r=>{const n=w.filter((e,s)=>Number(r)===s),t=[];if(j.map((e,s)=>{n[0].value===e.typeid&&t.push(e)}),!t.length==0)if(ia==!1){const e=w.filter((l,h)=>Number(r)===h),s=[];j.map((l,h)=>{e[0].value===l.typeid&&s.push(l)});const o=s[s.length-1].UpperBound;if(!Number(o)==0||!o===""){let l={ArrayofIndex:"",ArrayPayment:(s==null?void 0:s.length)+1,LowerBound:`${fe!==""?parseInt(fe)+parseInt("1"):""}`,UpperBound:"0",charge:"0",FixFees:"0",OurFees:"0",TypeRate:"amount",type:ge,typeid:be};M([...j,l])}else P(!0)}else L(!0);else{let e={ArrayofIndex:"",ArrayPayment:1,LowerBound:"0",UpperBound:"0",charge:"0",FixFees:"0",OurFees:"0",TypeRate:"amount",type:ge,typeid:be};M([...j,e])}},J=(r,n,t)=>{let e=[...j],s=[...j],d=[...j];e[r][n.target.name]=n.target.value,s[r].type=ge,d[r].typeid=be,M(e,s,d)},cr=r=>{r.preventDefault();const n=[],t=j.map(e=>{if(e.type==="Debit Card"||e.type==="Credit Card")var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} , "fixfees" :${parseFloat(e.FixFees==null||e.FixFees==""?0:e==null?void 0:e.FixFees)} , "ourfees" :${parseFloat(e.OurFees==null||e.OurFees==""?0:e==null?void 0:e.OurFees)} ,"charge":${parseFloat(e.charge==null||e.charge==""?0:e==null?void 0:e.charge)},"type":"${e.TypeRate}"}]}`;else var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} ,"charge":${parseFloat(e.charge==null||e.charge==""?0:e==null?void 0:e.charge)},"type":"${e.TypeRate}"}]}`;n.push(s)});return JSON.stringify(t),n},pr=(r,n,t,e)=>{var s="",d=t;j.map((i,m)=>{(i==null?void 0:i.ArrayPayment)===t&&(i==null?void 0:i.type)===e&&(s=i.LowerBound)});const o=j.map((i,m)=>(i==null?void 0:i.type)===e?t+1===(i==null?void 0:i.ArrayPayment)?{...i,ArrayPayment:t,LowerBound:s}:t<(i==null?void 0:i.ArrayPayment)?(d=d+1,{...i,ArrayPayment:d}):i:i);o.splice(r,1),M(o);const l=w.filter((i,m)=>Number(n)===m),h=[];if(o.map((i,m)=>{l[0].value===i.typeid&&h.push(i)}),!h.length==0){const m=h[h.length-1].UpperBound;je(m)}};y.useState("0");const[Tr,ir]=y.useState("0"),[C,K]=y.useState([]),ur=r=>{const n=F.filter((e,s)=>Number(r)===s),t=[];if(C.map((e,s)=>{n[0].id===e.typeid&&t.push(e)}),!t.length==0)if(ua==!1){const e=F.filter((l,h)=>Number(r)===h),s=[];C.map((l,h)=>{e[0].id===l.typeid&&s.push(l)});const o=s[s.length-1].UpperBound;if(!Number(o)==0||!o===""){let l={ArrayofIndex:"",ArrayPayment:(s==null?void 0:s.length)+1,LowerBound:`${Ce!==""?parseInt(Ce)+parseInt("1"):""}`,UpperBound:"0",charge:"0",TypeRate:"amount",type:ve,typeid:xe};K([...C,l])}else P(!0)}else L(!0);else{let e={ArrayofIndex:"",ArrayPayment:1,LowerBound:"0",UpperBound:"0",charge:"0",TypeRate:"amount",type:ve,typeid:xe};K([...C,e])}},W=(r,n,t)=>{let e=[...C],s=[...C],d=[...C];e[r][n.target.name]=n.target.value,s[r].type=ve,d[r].typeid=xe,K(e,s,d)},yr=r=>{r.preventDefault();const n=[],t=C.map(e=>{var s=`{"typeid":${e.typeid},"type": "${e.type}","range":[ { "lower":${parseInt(e.LowerBound)} ,"upper": ${e.UpperBound} ,"charge":${parseFloat(e.charge==null||e.charge==""?0:e==null?void 0:e.charge)},"type":"${e.TypeRate}"}]}`;n.push(s)});return JSON.stringify(t),ra(n),n},hr=(r,n,t,e)=>{var s="",d=t;C.map((i,m)=>{(i==null?void 0:i.ArrayPayment)===t&&(i==null?void 0:i.type)===e&&(s=i.LowerBound)});const o=C.map((i,m)=>(i==null?void 0:i.type)===e?t+1===(i==null?void 0:i.ArrayPayment)?{...i,ArrayPayment:t,LowerBound:s}:t<(i==null?void 0:i.ArrayPayment)?(d=d+1,{...i,ArrayPayment:d}):i:i);o.splice(r,1),K(o);const l=F.filter((i,m)=>Number(n)===m),h=[];if(o.map((i,m)=>{l[0].id===i.typeid&&h.push(i)}),!h.length==0){const m=h[h.length-1].UpperBound;Se(m)}},mr=r=>{r>Number(Fa)?(L(!0),q(!0)):(L(!1),q(!1))},gr=r=>{r>Number(La)?(L(!0),Q(!0)):(L(!1),Q(!1))},br=r=>{r>Number(fe)?(L(!0),q(!0)):(L(!1),q(!1))},vr=r=>{r>Number(Ce)?(L(!0),Q(!0)):(L(!1),Q(!1))};return a.jsx(a.Fragment,{children:a.jsx("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:a.jsx(ae,{children:a.jsx("div",{className:"mainBoxService mt-5",children:a.jsxs("div",{className:"serviceHeader bg-white text-white rounded-2",children:[a.jsx("h3",{className:"text-black px-4 mx-2 responsiveFontLargeHeading normal  border-bottom  pt-4 pb-3 pb-2",children:se===!0?"New Service Charge":"Update Service Charge"}),a.jsxs("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:[a.jsxs(ae,{className:"",children:[a.jsxs(S,{className:"mb-4 respoChildFooter",children:[a.jsxs(c.Group,{as:b,controlId:"formGridState",className:"pbSt",children:[a.jsx(c.Label,{children:"Exchange From"}),a.jsx(c.Select,{onChange:r=>{Ra(r)},value:de,children:Z.map(r=>a.jsx("option",{value:r==null?void 0:r.currency,children:r==null?void 0:r.currency}))})]}),a.jsxs(c.Group,{as:b,controlId:"formGridState",children:[a.jsx(c.Label,{children:"Exchange To"}),a.jsx(c.Select,{onChange:r=>Ma(r),value:ce,children:Z.map(r=>a.jsx("option",{value:r==null?void 0:r.currency,children:r==null?void 0:r.currency}))})]})]}),a.jsxs(S,{className:"mb-4 respoChildFooter",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt pbSt",children:[a.jsx(c.Label,{children:"Valid From "}),a.jsx(c.Control,{type:"text",value:Aa,onChange:Ia})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",children:[a.jsx(c.Label,{children:"Default Service Charge"}),a.jsx(c.Control,{type:"number",min:0,value:ne,onChange:r=>Ie(r.target.value)})]})]}),a.jsxs(S,{className:"mb-4 respoChildFooter",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt pbSt",children:[a.jsx(c.Label,{children:"Minimum Transaction Limit"}),a.jsx(c.Control,{type:"number",min:0,value:oe,onChange:r=>Pe(r.target.value)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",children:[a.jsx(c.Label,{children:"Maximum Transaction Limit"}),a.jsx(c.Control,{type:"number",min:0,value:le,onChange:r=>Ee(r.target.value)})]})]})]}),se===!0?a.jsx(a.Fragment,{children:a.jsxs(ae,{children:[a.jsxs(Y,{id:"controlled-tab-example",activeKey:De,onSelect:r=>Ae(r),className:"border-0 navTabs text-black",children:[a.jsxs(T,{eventKey:"pay1",title:"Payment Method Charges",className:"text-black navTabs border-0 pt-0",children:[a.jsx("hr",{}),a.jsx(Y,{defaultActiveKey:"profile",id:"justify-tab-example",className:"border-0 px-0 mx-0 navTabs",activeKey:$e,onSelect:r=>{Ka(r),$a(r)},children:w.map((r,n)=>a.jsxs(T,{eventKey:n,title:r.label,children:[a.jsx("hr",{}),a.jsxs("div",{children:[v.map((t,e)=>{if(r.label===t.type)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"CreateServiceChargeDynamicCard mb-5",children:[a.jsx(S,{children:a.jsx("div",{className:"d-flex ms-auto justify-content-end",children:a.jsx("div",{className:" pb-4 justify-content-end",children:a.jsxs("a",{className:"btn btn-danger  text-white bolder ms-3",onClick:()=>tr(e,t==null?void 0:t.ArrayPayment,t==null?void 0:t.type),children:[a.jsx("i",{className:"text-white fa fa-trash bolder"})," "]})})})}),a.jsxs("div",{children:[a.jsxs(S,{className:"mb-3 respoChildFooter pbSt ",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Lower Bound:"}),a.jsx(c.Control,{type:"number",readOnly:!0,disabled:!0,placeholder:"Lower Bound",min:0,className:"bg-white",name:"LowerBound",value:t.LowerBound,onChange:s=>{k(e,s,r.label)}})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Upper Bound:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:t.LowerBound,name:"UpperBound",value:t.UpperBound,onBlur:s=>{mr(t.LowerBound),Wa(n,e,s,t.ArrayofIndex),Za()},onChange:s=>{k(e,s,r.label),la(s.target.value),V(s.target.value)}})]})]}),a.jsxs(S,{className:`mb-3 respoChildFooter pbSt d-flex ${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"col-lg-6 pbDowSt",children:[a.jsx(c.Label,{children:"Fix Fees:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"FixFees",value:t.FixFees,onChange:s=>k(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"col-lg-6 pbDowSt",children:[a.jsx(c.Label,{children:"Our Fees:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"OurFees",value:t.OurFees,onChange:s=>k(e,s,r.label)})]})]}),a.jsxs(S,{className:"mb-3 respoChildFooter pbSt ",children:[a.jsxs(c.Group,{as:b,controlId:" formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Rate:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"charge",value:t.charge,onChange:s=>k(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Type Rate:"}),a.jsxs(c.Select,{type:"number",name:"TypeRate",value:t.TypeRate,onChange:s=>k(e,s,r.label),children:[a.jsx("option",{value:"",children:"Select Type of Rate"}),a.jsx("option",{value:"amount",children:"Amount"}),a.jsx("option",{value:"percentage",className:`${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:"Percentage"})]})]})]})]},e)]})})}),a.jsx(S,{className:"d-flex justify-content-center text-center",children:a.jsxs("a",{onClick:t=>{Va(n)},className:"btn btn-primary text-center col-lg-2 d-flex m-auto text-white bolder justify-content-center",children:[a.jsx("i",{className:"fa fa-plus"})," Add Data"]})})]})]}))})]}),a.jsxs(T,{eventKey:"payinners1",title:"Delivery Method Charges",className:" text-black navTabs",children:[a.jsx("hr",{}),a.jsx(Y,{defaultActiveKey:"profile",id:"justify-tab-example",className:"mb-3 respoChildFooter pbSt border-0 navTabs",activeKey:Ue,onSelect:r=>Ja(r),children:F.map((r,n)=>a.jsxs(T,{eventKey:n,title:r.labelDelivery,children:[f.map((t,e)=>{if(r.labelDelivery===t.type)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"CreateServiceChargeDynamicCard mb-3 respoChildFooter pbSt",children:[a.jsx("div",{className:" d-flex justify-content-end",children:a.jsxs("a",{className:"btn btn-danger  text-white bolder ms-3",onClick:()=>lr(e,t==null?void 0:t.ArrayPayment,t==null?void 0:t.type),children:[a.jsx("i",{className:"text-white fa fa-trash bolder"})," "]})}),a.jsxs("div",{children:[a.jsxs(S,{className:"mb-3 respoChildFooter pbSt",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Lower Bound:"}),a.jsx(c.Control,{type:"number",min:0,className:"bg-white",disabled:!0,readOnly:!0,name:"LowerBound",value:t.LowerBound,onChange:s=>z(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Upper Bound:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"UpperBound",value:t.UpperBound,onBlur:s=>{gr(t.LowerBound),Xa(n,e,s,t==null?void 0:t.ArrayofIndex),za()},onChange:s=>{z(e,s,r.label),ca(s.target.value),Da(s.target.value)}})]})]}),a.jsxs(S,{className:"mb-3 respoChildFooter pbSt ",children:[a.jsxs(c.Group,{as:b,controlId:" formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Rate:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"charge",value:t.charge,onChange:s=>z(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Type Rate:"}),a.jsxs(c.Select,{type:"number",name:"TypeRate",value:t.TypeRate,onChange:s=>z(e,s,r.label),children:[a.jsx("option",{value:"",children:"Select Type of Rate"}),a.jsx("option",{value:"amount",children:"Amount"}),a.jsx("option",{value:"percentage",className:`${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:"Percentage"})]})]})]})]},e)]})})}),a.jsx("br",{}),a.jsx(S,{className:"d-flex justify-content-center",children:a.jsxs("a",{onClick:()=>sr(n),className:"btn btn-primary text-center col-lg-2 d-flex m-auto text-white bolder justify-content-center",children:[a.jsx("i",{className:"fa fa-plus"})," Add Data"]})})]}))})]})]}),a.jsx(S,{children:a.jsxs("div",{className:"d-flex border-top pt-3 paginationEnd",children:[a.jsx("div",{className:"",children:a.jsx("div",{style:{background:"#AA2AE1"},className:"rounded btn text-white",onClick:r=>{Ga(r)},children:"Create"})}),a.jsx("div",{className:"",children:a.jsx("div",{className:" border-0",children:a.jsx("a",{onClick:()=>pa(),className:"btn btn-default ms-3 text-black bolder border 2",children:"Cancel"})})})]})})]})}):a.jsx(a.Fragment,{children:a.jsxs(ae,{children:[a.jsxs(Y,{id:"controlled-tab-example",activeKey:De,onSelect:r=>Ae(r),className:"border-0 text-black navTabs",children:[a.jsxs(T,{eventKey:"pay1",title:"Payment Method Charges",className:"text-black navTabs border-0 pt-0",children:[a.jsx("hr",{}),a.jsx(Y,{defaultActiveKey:"profile",id:"justify-tab-example",className:"border-0 navTabs px-0 mx-0",activeKey:$e,onSelect:r=>Ha(r),children:w.map((r,n)=>a.jsxs(T,{eventKey:n,title:r.label,children:[a.jsx("hr",{}),a.jsxs("div",{children:[j.map((t,e)=>{if(r.label===t.type)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"CreateServiceChargeDynamicCard mb-5",id:"p",children:[a.jsx(S,{children:a.jsx("div",{className:"d-flex ms-auto justify-content-end",children:a.jsx("div",{className:" pb-4 justify-content-end",children:a.jsxs("a",{className:"btn btn-danger  text-white bolder ms-3",onClick:()=>pr(e,n,t==null?void 0:t.ArrayPayment,t==null?void 0:t.type),children:[a.jsx("i",{className:"text-white fa fa-trash bolder"})," "]})})})}),a.jsxs("div",{children:[a.jsxs(S,{className:"mb-3 respoChildFooter pbSt",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Lower Bound:"}),a.jsx(c.Control,{type:"number",min:0,className:"bg-white",disabled:!0,readOnly:!0,name:"LowerBound",value:t.LowerBound,onChange:s=>J(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Upper Bound:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"UpperBound",value:t.UpperBound,onBlur:s=>{br(t.LowerBound),er(n,e,s,t.ArrayofIndex),qa()},onChange:s=>{J(e,s,r.label),je(s.target.value)}})]})]}),a.jsxs(S,{className:`mb-3 respoChildFooter pbSt d-flex ${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"col-lg-6 pbDowSt",children:[a.jsx(c.Label,{children:"Fix Fees:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"FixFees",value:t.FixFees,onChange:s=>J(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"col-lg-6 pbDowSt",children:[a.jsx(c.Label,{children:"Our Fees:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"OurFees",value:t.OurFees,onChange:s=>J(e,s,r.label)})]})]}),a.jsxs(S,{className:"mb-3 respoChildFooter pbSt ",children:[a.jsxs(c.Group,{as:b,controlId:" formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Rate:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"charge",value:t.charge,onChange:s=>J(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Type Rate:"}),a.jsxs(c.Select,{type:"number",name:"TypeRate",value:t.TypeRate,onChange:s=>J(e,s,r.label),children:[a.jsx("option",{value:"",children:"Select Type of Rate"}),a.jsx("option",{value:"amount",children:"Amount"}),a.jsx("option",{value:"percentage",className:`${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:"Percentage"})]})]})]})]},e)]})})}),a.jsx(S,{className:"d-flex justify-content-center",children:a.jsxs("a",{onClick:t=>dr(n),className:"btn btn-primary w-auto d-flex m-auto text-white bolder",children:[a.jsx("i",{className:"fa fa-plus"})," Edit Data"]})})]})]}))})]}),a.jsx(T,{eventKey:"payinners1",title:"Delievery Method Charges",className:" text-black navTabs",children:a.jsxs(Y,{defaultActiveKey:"profile",id:"justify-tab-example",className:"mb-3 respoChildFooter pbSt border-0 navTabs",activeKey:Ue,onSelect:r=>Ya(r),children:[a.jsx("hr",{}),F.map((r,n)=>a.jsxs(T,{eventKey:n,title:r.labelDelivery,children:[C.map((t,e)=>{if(r.labelDelivery===t.type)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"CreateServiceChargeDynamicCard mb-3 respoChildFooter pbSt",children:[a.jsx("div",{className:" d-flex justify-content-end",children:a.jsxs("a",{className:"btn btn-danger  text-white bolder ms-3",onClick:()=>hr(e,n,t==null?void 0:t.ArrayPayment,t==null?void 0:t.type),children:[a.jsx("i",{className:"text-white fa fa-trash bolder"})," "]})}),a.jsxs("div",{children:[a.jsxs(S,{className:"mb-3 respoChildFooter pbSt",children:[a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Lower Bound:"}),a.jsx(c.Control,{type:"number",min:0,className:"bg-white",disabled:!0,readOnly:!0,name:"LowerBound",value:t.LowerBound,onChange:s=>W(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridZip",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Upper Bound:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"UpperBound",value:t.UpperBound,onChange:s=>{W(e,s,r.label),ir(s.target.value),Se(s.target.value)},onBlur:s=>{vr(t.LowerBound),ar(n,e,s,t.ArrayofIndex),Qa()}})]})]}),a.jsxs(S,{className:"mb-3 respoChildFooter pbSt ",children:[a.jsxs(c.Group,{as:b,controlId:" formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Rate:"}),a.jsx(c.Control,{type:"number",className:"bg-white",min:0,name:"charge",value:t.charge,onChange:s=>W(e,s,r.label)})]}),a.jsxs(c.Group,{as:b,controlId:"formGridCity",className:"pbDowSt",children:[a.jsx(c.Label,{children:"Type Rate:"}),a.jsxs(c.Select,{type:"number",name:"TypeRate",value:t.TypeRate,onChange:s=>W(e,s,r.label),children:[a.jsx("option",{value:"",children:"Select Type of Rate"}),a.jsx("option",{value:"amount",children:"Amount"}),a.jsx("option",{value:"percentage",className:`${t.type==="Debit Card"||t.type==="Credit Card"?"d-block":"d-none"}`,children:"Percentage"})]})]})]})]},e)]})})}),a.jsx("br",{}),a.jsx(S,{className:"d-flex justify-content-center",children:a.jsxs("a",{onClick:t=>ur(n),className:"btn btn-primary w-auto d-flex m-auto text-white bolder",children:[a.jsx("i",{className:"fa fa-plus"})," Edit Data"]})})]}))]})})]}),a.jsx(S,{children:a.jsxs("div",{className:"d-flex",children:[a.jsx("div",{className:"",children:a.jsx("div",{style:{background:"#AA2AE1"},className:"rounded btn text-white",onClick:r=>{ka(r)},children:"Update"})}),a.jsx("div",{className:"",children:a.jsx("div",{className:" border-0",children:a.jsx("a",{onClick:()=>pa(),className:"btn btn-default ms-3 text-black bolder border 2",children:"Cancel"})})})]})})]})}),a.jsx(ee,{show:fa,title11:"Service Charge updated successfully",onHide:()=>we("/service-charge")}),a.jsx(ee,{show:va,title11:"Service Charge added successfully",onHide:()=>we("/service-charge")}),a.jsx(ee,{show:_a,title11:"UpperBound Value Is not '0' or Blank",onHide:()=>P(!1)}),a.jsx(ee,{show:nr,title11:"UpperBound Value Is not Lower Than LowerBound",onHide:()=>L(!1)})]})]})})})})})}export{ft as default};
