import{r as s,j as e,b as S}from"./index-CZLZpOaH.js";import{P as H}from"./PageHeader-6CScOhCz.js";import{C as i}from"./common.constants-BAKO8LyS.js";import{F as v}from"./Form-ExWjSL5Y.js";import{h as P}from"./moment-CAEcp8GN.js";import{L as M}from"./Loader-BUXOLHKX.js";import{P as U}from"./Pagination-DBwceeB_.js";import"./DashbordData-n50t2wKP.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./useControlled-CSwFU9cf.js";import"./ButtonBase-Dp3TaUiU.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./assertThisInitialized-B9jnkVVz.js";import"./TransitionGroupContext-QmIPOmoK.js";function he(){const[b,u]=s.useState(!1),[x,N]=s.useState([]),[y,C]=s.useState(0),[o,d]=s.useState(1),[c,k]=s.useState(i.DefaultPageSize),[D,V]=s.useState(1),[B,O]=s.useState(i.DefaultPageSize),[p,R]=s.useState(0),[m,_]=s.useState(""),[h,E]=s.useState(0),[F,g]=s.useState(!1),[r,w]=s.useState([]),A=()=>{var t={pageindex:D,pagesize:B,searchdata:"",sortparam:"create_at",sortorder:"DESC"};S({url:i.BASE_URL+"/getallpartnerbanks",method:"POST",data:t}).then(n=>{N(n.data.data)})},I=t=>{const a=t.target.value;R(a),f(a)},f=async t=>{u(!0);const a=new FormData;a.append("partBankId",t||p),a.append("pageindex",o),a.append("pagesize",c),a.append("searchdata",m),await S.post(i.NEW_BASE_URL+"/gettransactionsbypartnerbank",a).then(n=>{w(n.data.data),C(n.data.totalPageCount),E(n.data.recordCount),g(n.data.recordCount==0?m!="":!0)}).catch(n=>console.log(n)),u(!1)},L=t=>{const a=P(),n=P(t),l=a.diff(n,"days");if(l===0)return"Today";if(l===1)return"1 day ago";if(l>1&&l<=31)return`${l} days ago`;if(l>31){const j=Math.floor(l/31);return`${j} month${j>1?"s":""} ago`}},T=(t,a)=>{a==o,d(a)},$=t=>{k(Number(t.target.value)),d(1)},z=t=>{const a=t.target.value;_(a),d(1),g(r.length>0||a.trim()!=="")};return s.useEffect(()=>{A(),p&&f()},[o,c,m]),e.jsxs(e.Fragment,{children:[b==!0?e.jsx(M,{}):"",e.jsxs("div",{className:"container-fluid",children:[e.jsx(H,{HeaderText:"Partner Bank API",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"body project_report",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter ",children:[r&&r.length>0&&e.jsxs("div",{className:"filter-row pb-2 ",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(v.Select,{name:"tbl_meeting_length",onChange:$,value:c,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:i.show_rows.map(t=>e.jsx("option",{value:t,children:t}))})})]}),e.jsxs("div",{className:"d-flex pbSt align-items-center respoChildFooter",children:[F&&e.jsxs("div",{className:"form-group d-flex align-items-center mb-0 pbDowSt",children:[e.jsxs("label",{className:"font-weight-normal mb-0",children:["Search:"," "]})," ","  ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 px-3",placeholder:"",onChange:z})]})," ","  ",e.jsx("div",{className:"row d-flex g-0",children:e.jsx("div",{className:"justify-content-end d-block ms-auto",children:e.jsxs(v.Select,{className:"py-2 pe-5 border border-black  ms-auto",value:p,onChange:I,children:[e.jsx("option",{value:"",children:"Select an option"}),x&&x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})})]})]}),e.jsxs("div",{className:"table-responsive mt-3",children:[e.jsxs("table",{className:"table m-b-0  ",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sender/Receiver"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Recieved"}),e.jsx("th",{children:"Method"}),e.jsx("th",{children:"Type"})]})}),e.jsx("tbody",{children:r&&r.length>0?r.map(t=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t.userName==null?"-":t.userName," / ",t.recipientName==null?"-":t.recipientName]}),e.jsx("td",{children:t.amount==null?"-":t.amount}),e.jsx("td",{children:L(t.created_at)}),e.jsx("td",{children:t.method==null?"-":t.method}),e.jsx("td",{children:t.type==null?"-":t.type})]})})):m==""?e.jsx("td",{colSpan:7,children:e.jsx("p",{className:"text-center",children:"Please Choose Partner Banks"})}):e.jsx("td",{colSpan:7,children:e.jsx("p",{className:"text-center",children:"No Data Found "})})})]}),r&&r.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2 pbSt",children:h>0?`Showing ${(o-1)*c+1} to ${o*c>h?h:o*c} of ${h} entries`:"No records Available"}),e.jsx(U,{count:y,page:o,onChange:T,color:"secondary",shape:"rounded"})]})]})]})})})})]})]})}export{he as default};
