import{y as Ne,r as s,j as e,b as p}from"./index-CZLZpOaH.js";import{M as Le}from"./ModalComponent-Can9sfzz.js";import{C as d}from"./common.constants-BAKO8LyS.js";import{L as Re}from"./Loader-BUXOLHKX.js";import{C as T}from"./Container-D9at3elR.js";import{R as o}from"./Row-q1SNRrbp.js";import{F as a}from"./Form-ExWjSL5Y.js";import{C as n}from"./Col-BflThe67.js";import{B as _}from"./Button-BsmK-xwD.js";import"./Modal-CsKgPfCY.js";import"./ThemeProvider-BovkV_tw.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./index-tz1zYP65.js";import"./divWithClassName-BYsY4_Vt.js";import"./ElementChildren-DV238mrs.js";import"./Button-wtvkehlk.js";function ht(V){const y=Ne();s.useState();const[U,w]=s.useState(),[M,q]=s.useState(),[z,O]=s.useState(),[$,W]=s.useState(),[H,J]=s.useState(!1);s.useState(!1);const[A,Ae]=s.useState(V.location.state),[i,G]=s.useState("1"),[Ee,m]=s.useState("Amount"),[u,K]=s.useState(""),[Q,Fe]=s.useState(d.DefaultPageSize),[X,_e]=s.useState(""),[Y,we]=s.useState(1),[B,Z]=s.useState([]),[x,ee]=s.useState([]),[D,te]=s.useState(""),[h,ae]=s.useState(0),[g,se]=s.useState(0),[b,re]=s.useState(0),[l,E]=s.useState(!1),[C,ne]=s.useState(""),[I,le]=s.useState(""),[P,oe]=s.useState(""),[k,ce]=s.useState(""),[f,ie]=s.useState(""),[j,de]=s.useState(""),[N,me]=s.useState(""),[S,ue]=s.useState(""),[v,pe]=s.useState(""),[L,xe]=s.useState(""),[F,he]=s.useState(""),[R,ge]=s.useState(""),[je,Ge]=s.useState(!1),Se=new Date().toISOString().split("T")[0],ve=t=>{switch(G(t.target.value),t.target.value==3&&w(365),t.target.value){case"1":m("Amount");break;case"2":m("Transaction");break;case"3":m("Number Of Active Recipients");break;default:m("");break}},ye=async()=>{try{if(i==="1"){if(!g||!u||!b||!h||!D||!C)return E(!0),0;{const t={type:"Deal",payoutPartnerId:parseInt(g),rate:parseFloat(h),currency:b,dealDate:u,settlementDateFrom:S,settlementDateTo:v,amount:parseInt(D),reference:f,remarks:j,particulars:C};(await p.post(d.NEW_BASE_URL3+"/savedealaccountdetails",t)).data.status==!0&&y("/accounts")}}if(i==="2")if(!I||!P||!k||!f||!j||!N)E(!0);else{const t={type:"Expenses",payoutPartnerId:parseInt(g),rate:parseFloat(h),currency:P,dealDate:u,settlementDateFrom:S,settlementDateTo:v,amount:parseInt(k),reference:f,remarks:j,particulars:N};(await p.post(d.NEW_BASE_URL3+"/savedealaccountdetails",t)).data.status==!0&&y("/accounts")}if(i==="3")if(!S||!v||!L||!F||!R)E(!0);else{const t={type:"Settlement Commission",payoutPartnerId:parseInt(g),rate:parseFloat(h),currency:L,dealDate:u,settlementDateFrom:S,settlementDateTo:v,amount:0,reference:"",remarks:j,particulars:R};(await p.post(d.NEW_BASE_URL3+"/savedealaccountdetails",t)).data.status==!0&&y("/accounts")}}catch(t){console.log(t)}},fe=()=>{p.post(d.BASE_URL+"/getrisksettingsbyid",{id:A}).then(t=>{var r;w((r=t.data.data)==null?void 0:r.days),q(t.data.data.lowRisk),O(t.data.data.mediumRisk),W(t.data.data.highRisk),G(t.data.data.categoryId),t.data.data.categoryId==1?m("Amount"):t.data.data.categoryId==2?m("Transaction"):m("Number Of Active Recipients")}).catch(t=>console.log(t))},De=()=>{const t={id:A,categoryId:i,days:U,lowRisk:M,mediumRisk:z,highRisk:$};p.post(d.BASE_URL+"/saveupdaterisksettings",t).then(async r=>{r.data.status==!0&&y("/risk-management")}).catch(r=>console.log(r))},be=()=>{y("/accounts")},Ce=async()=>{const t={pageindex:Y,pagesize:Q,searchdata:X,sortparam:"created_at",sortorder:"DESC"},r=await p.post(d.BASE_URL+"/getallpartnerbanks",t);r.data.status==!0&&Z(r.data.data)},Pe=async()=>{try{const t=await p.get(d.BASE_URL+"/getallcountries");t.data.status===!0&&ee(t.data.data)}catch{}},ke=t=>{const r=t.target.value;/^[0-9]*$/.test(r)&&te(r)};return s.useEffect(()=>{fe(),Ce(),Pe()},[]),e.jsx(e.Fragment,{children:e.jsx("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsxs(T,{className:"",children:[je==!0?e.jsx(Re,{}):"",e.jsx("div",{className:"mainBoxService mt-3",children:e.jsxs("div",{className:"serviceHeader bg-white text-black rounded-0",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Add Accounts"}),e.jsx("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:e.jsxs(T,{className:"",children:[e.jsxs(o,{className:"mb-4 px-0",children:[e.jsxs(a.Group,{as:n,controlId:"formGridCity",defaultValue:i,onChange:ve,children:[e.jsx(a.Label,{children:"Type"}),e.jsxs(a.Select,{"aria-label":"Default select ̰ example",children:[e.jsx("option",{value:"1",children:"Deal"}),e.jsx("option",{value:"2",children:"Expenses"}),e.jsx("option",{value:"3",children:"Settlement Commission"})]})]}),e.jsxs(a.Group,{as:n,controlId:"formGridCity",children:[e.jsx(a.Label,{children:"Payout Partner"}),e.jsxs(a.Select,{"aria-label":"Default select ̰ example",value:g,onChange:t=>se(t.target.value),children:[e.jsx("option",{children:"select payout partner"}),B&&B.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),l&&!g&&e.jsx("small",{className:"responsiveFontLarg text-danger error_message ms-2 error notentered",children:"Please Select Payout Partner"})]})]}),i==="1"&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Deal Date"}),e.jsx(a.Control,{type:"date",required:!0,placeholder:"To date",name:"Referal",className:" reflink link py-4 pbSt",value:u,onChange:t=>{const r=t.target.value;/^\d{4}-\d{2}-\d{2}$/.test(r)&&K(r)}}),l&&!u&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select Deal Date"})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Deal Currency"}),e.jsxs(a.Select,{value:b,onChange:t=>re(t.target.value),children:[e.jsx("option",{children:"select currency"}),x&&x.map(t=>e.jsx("option",{value:t.currency,children:t.currency}))]}),l&&!b&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select Deal Currency"})]})]}),e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Deal Amount"}),e.jsx(a.Control,{type:"text",placeholder:"Deal Amount",value:D,onChange:ke}),l&&!D&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Deal Amount"})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Deal Rate"}),e.jsx(a.Control,{type:"text",placeholder:"Deal Rate",value:h,onChange:t=>{const c=t.target.value.replace(/[^0-9.]/g,"");ae(c)}}),l&&!h&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Deal Rate"})]})]}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Particulars"}),e.jsx("textarea",{type:"textarea",className:"form-control  py-4 ",placeholder:"Particulars",rows:"4",value:C,onChange:t=>ne(t.target.value)}),l&&!C&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Particulars"})]})})]}),i==="2"&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Expense Date"}),e.jsx(a.Control,{type:"date",required:!0,placeholder:"Expense Date",name:"Referal",className:" reflink link py-4 pbSt",value:I,onChange:t=>{const r=t.target.value;/^\d{4}-\d{2}-\d{2}$/.test(r)&&le(r)}}),l&&!u&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select Expense Date"})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Expense Currency"}),e.jsxs(a.Select,{"aria-label":"Default select ̰ example",value:P,onChange:t=>oe(t.target.value),children:[e.jsx("option",{children:"select currency"}),x&&x.map(t=>e.jsx("option",{value:t.currency,children:t.currency}))]}),l&&!P&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select  Expense Currency"})]})]}),e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Expense Amount"}),e.jsx(a.Control,{type:"number",placeholder:"Expense Amount",value:k,onChange:t=>{const c=t.target.value.replace(/[^0-9.]/g,"");ce(c)}}),l&&!k&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Expense Amount "})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Transaction Reference"}),e.jsx(a.Control,{type:"text",placeholder:"Transaction Reference",value:f,onChange:t=>ie(t.target.value)}),l&&!f&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Transaction Reference  "})]})]}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Remarks"}),e.jsx(a.Control,{type:"text",placeholder:"Remarks",value:j,onChange:t=>de(t.target.value)}),l&&!j&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Remarks  "})]})}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Particulars"}),e.jsx("textarea",{type:"textarea",className:"form-control  py-4 ",placeholder:"Particulars",rows:"4",value:N,onChange:t=>me(t.target.value)}),l&&!N&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Particulars  "})]})})]}),i==="3"&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"From Date"}),e.jsx(a.Control,{type:"date",required:!0,placeholder:"From Date",name:"Referal",className:" reflink link py-4 pbSt",value:S,onChange:t=>{const r=t.target.value;/^\d{4}-\d{2}-\d{2}$/.test(r)&&ue(r)}}),l&&!S&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select From Date"})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"To Date"}),e.jsx(a.Control,{type:"date",required:!0,placeholder:"To Date",name:"Referal",className:" reflink link py-4 pbSt",max:Se,value:v,onChange:t=>{const r=t.target.value;/^\d{4}-\d{2}-\d{2}$/.test(r)&&pe(r)}}),l&&!v&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Select To Date"})]})]}),e.jsxs(o,{className:"mb-4",children:[e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Settlement Currency"}),e.jsxs(a.Select,{"aria-label":"Default select ̰ example",value:L,onChange:t=>xe(t.target.value),children:[e.jsx("option",{children:"select currency"}),x&&x.map(t=>e.jsx("option",{value:t.currency,children:t.currency}))]}),l&&!L&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Settlement Currency "})]}),e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Settlement Amount"}),e.jsx(a.Control,{type:"number",placeholder:"Settlement Amount",value:F,onChange:t=>{const c=t.target.value.replace(/[^0-9.]/g,"");he(c)}}),l&&!F&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Settlement Amount "})]})]}),e.jsx(o,{className:"mb-4",children:e.jsxs(a.Group,{as:n,children:[e.jsx(a.Label,{children:"Particulars"}),e.jsx("textarea",{type:"textarea",className:"form-control  py-4 ",placeholder:"Particulars",rows:"4",value:R,onChange:t=>ge(t.target.value)}),l&&!R&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error notentered",children:"Please Enter Particulars  "})]})})]}),e.jsxs(o,{className:"row d-flex m-auto  pt-3",children:[A?e.jsx(_,{size:"sm",className:"purpleBackground border-0 w-auto px-4",onClick:()=>De(),children:"Update"}):e.jsx(_,{size:"sm",className:"purpleBackground text-white border text-black w-auto px-4",onClick:()=>ye(),children:"Add"}),e.jsx(_,{size:"sm",className:"bg-transparent  border text-black w-auto px-3",onClick:be,children:"Cancel"})]})]})})]})}),e.jsx(Le,{show:H,title11:"Create Risk Management successfully",onHide:()=>J(!1)})]})})})}export{ht as default};
