import{R as n,r as a,j as e,b as N}from"./index-CZLZpOaH.js";import{P as J}from"./PageHeader-6CScOhCz.js";import{C as c}from"./common.constants-BAKO8LyS.js";import{F as K}from"./Form-ExWjSL5Y.js";import{M as V}from"./ModalComponentPopup-D_u4dGYC.js";import{M as W}from"./ModalComponent-Can9sfzz.js";import{d as X}from"./defaultAvatar-CJF19Wb_.js";import{d as Y}from"./Close-Dzfaz63K.js";import{P as Z}from"./Pagination-DBwceeB_.js";import{M as ee}from"./Modal-Cgbm8Po3.js";import{B as te}from"./Box-Jn0s_-VR.js";import"./DashbordData-n50t2wKP.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";import"./Modal-CsKgPfCY.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./divWithClassName-BYsY4_Vt.js";import"./createSvgIcon-BXb30exD.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ownerWindow-B35kT-qP.js";import"./useId-BCOK0MJf.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./useControlled-CSwFU9cf.js";import"./ButtonBase-Dp3TaUiU.js";import"./assertThisInitialized-B9jnkVVz.js";import"./isHostComponent-D6l1mxjA.js";import"./Portal-BnZs0see.js";function Ye(){const u=useNavigate(),[w,C]=n.useState(0),[o,m]=n.useState(1),[i,y]=n.useState(c.DefaultPageSize),[h,P]=n.useState(""),[d,R]=n.useState(0),[se,g]=a.useState(!1),[r,D]=a.useState([]),[M,k]=a.useState(0),[E,p]=a.useState(!1),[_,f]=a.useState(!1),[A,j]=a.useState(!1),[B,F]=a.useState(""),[I,S]=a.useState(!1);a.useState(""),a.useState(!1);const Q=t=>{F(t),S(!0)},b=()=>{S(!1)},$=()=>{p(!1)},H=t=>{const s=t.target.value;P(s),j(r.length>0||s.trim()!=="")},L=t=>{y(Number(t.target.value)),m(1)},O=(t,s)=>{s==o?m(o):m(s)},T=t=>{u({pathname:"/edit-reviews",state:t})},z=()=>{u({pathname:"/edit-reviews"})},U=t=>{const x=[];for(let l=1;l<=5;l++)l<=t?x.push(e.jsx("span",{className:"fa fa-star",style:{color:"orange"}},l)):x.push(e.jsx("span",{className:"fa fa-star",style:{color:"gray"}},l));return x},v=async()=>{g(!0);const t={pageindex:o,pagesize:i,searchdata:h,sortparam:"created_at",sortorder:"DESC"};await N.post(c.BASE_URL+"/getallreview",t).then(s=>{D(s.data.data),C(s.data.totalPageCount),R(s.data.recordCount),j(s.data.recordCount==0?h!="":!0)}).catch(s=>{console.log(s)}),g(!1)},q=t=>{k(t),p(!0)},G=async()=>{p(!1);try{(await N.post(c.BASE_URL+"/deletereviewbyid",{id:M})).data.status==!0&&(f(!0),v())}catch(t){console.log(t)}};return a.useEffect(()=>{v()},[h,i,o]),e.jsxs("div",{className:"container-fluid",onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[e.jsx(J,{HeaderText:"Reviews",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"body project_report",children:e.jsx("div",{className:"row d-flex g-0",children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter ",children:[r&&r.length>0&&e.jsxs("div",{className:"filter-row pb-2 pbSt",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center pbSt",children:e.jsx(K.Select,{name:"tbl_meeting_length",onChange:L,value:i,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:c.show_rows.map(t=>e.jsx("option",{value:t,children:t}))})})]}),e.jsxs("div",{className:"d-flex align-items-center  respoChildFooter",children:[A&&e.jsxs("div",{className:"form-group d-flex align-items-center mb-0",children:[e.jsx("label",{className:"font-weight-normal mb-0",children:"Search: "}),"   ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 px-3",placeholder:"",onChange:H})]}),"   ",e.jsx("div",{className:"pbSt",children:e.jsxs("a",{className:"purpleBackground btn btn-default  text-white bolder",onClick:z,children:[e.jsx("i",{className:"text-white fa fa-plus bolder"})," Add New"]})})]})]}),e.jsxs("table",{className:"table m-b-0  ",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Profile"}),e.jsx("th",{children:"Review"}),e.jsx("th",{children:"Rating"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r&&r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{className:"",children:t.image==""?e.jsx("img",{src:X,alt:"Image",height:100,width:100}):e.jsx("img",{src:t.image,alt:"Image",height:100,width:100})}),e.jsx("td",{children:t.message.length>50?e.jsxs(e.Fragment,{children:[`${t.message.slice(0,50)}...`,e.jsx("span",{onClick:()=>Q(t.message),style:{cursor:"pointer",color:"blue",textDecoration:"underline"},children:"Read More"})]}):t.message}),e.jsx("td",{children:e.jsx("span",{children:U(t.star)})}),e.jsxs("td",{children:[e.jsx("a",{className:"bg-transparent  px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>T(t.id),children:e.jsx("i",{className:"fa fa-edit",title:"Edit"})})," ",e.jsx("a",{className:"bg-transparent  px-3 py-2 rounded-2 border-1 border pointer border-black mr-1",onClick:()=>{q(t.id)},children:e.jsx("i",{className:"fa fa-trash",style:{color:"red"},title:"Delete"})})," "]})]}))})]}),r&&r.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2 pbSt",children:d>0?`Showing ${(o-1)*i+1} to ${o*i>d?d:o*i} of ${d} entries`:""}),e.jsx(Z,{count:w,page:o,onChange:O,color:"secondary",shape:"rounded"})]})]})})})})})}),e.jsx(ee,{open:I,onClose:b,children:e.jsx(te,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",width:{xs:"90%",sm:"70%",md:"50%",lg:"50%"},paddingBottom:"20px"},children:e.jsxs("div",{children:[e.jsxs("div",{className:"border-bottom py-2 mb-0 d-flex justify-content-between",children:[e.jsx("h5",{children:"Full message"}),e.jsx("div",{onClick:b,className:"pointer",children:e.jsx(Y,{})})]}),e.jsx("div",{className:"p-3 ps-0 ",children:B})]})})}),e.jsx(V,{show:E,title1:"Are you sure want to delete this record ?",cancle:t=>$(),SavePr:()=>G()}),e.jsx(W,{show:_,title11:"Deleted successfully",onHide:()=>f(!1)})]})}export{Ye as default};
