import{b9 as x,ba as V,bb as d,bc as y,bd as N,be as _,bf as E,bg as k,b8 as p,r as u,bh as C,j as e,y as L,bi as j,bj as b}from"./index-CZLZpOaH.js";import{b as f}from"./createSvgIcon-CvFBLNCx.js";/* empty css                   */import{C as S}from"./Container-D9at3elR.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ThemeProvider-BovkV_tw.js";function h(i,t,c,o){return new(c||(c=Promise))(function(n,s){function m(v){try{r(o.next(v))}catch(l){s(l)}}function a(v){try{r(o.throw(v))}catch(l){s(l)}}function r(v){var l;v.done?n(v.value):(l=v.value,l instanceof c?l:new c(function(g){g(l)})).then(m,a)}r((o=o.apply(i,[])).next())})}const z=(i,t)=>x.e("react-sdk",t,i);["blink"].some(i=>{var t,c;return((c=(t=V.getEngine())===null||t===void 0?void 0:t.name)===null||c===void 0?void 0:c.toLowerCase())===i});const M=(i=z)=>{const t=d(y),c=d(N),o=d(_),n=d(o?E:k),s=p(),m=u.useCallback(()=>h(void 0,void 0,void 0,function*(){try{yield s.setLocalAudioEnabled(!t)}catch(r){i(r,"toggleAudio")}}),[s,t,i]),a=u.useCallback(()=>h(void 0,void 0,void 0,function*(){try{yield s.setLocalVideoEnabled(!c)}catch(r){i(r,"toggleVideo")}}),[s,c,i]);return{isLocalAudioEnabled:t,isLocalVideoEnabled:c,toggleAudio:n!=null&&n.audio?m:void 0,toggleVideo:n!=null&&n.video?a:void 0}},w=({trackId:i,attach:t})=>{const c=p(),o=u.useRef(null),n=d(C(i)),s=u.useRef(),m=u.useCallback(a=>{a&&(o.current=a)},[]);return u.useEffect(()=>{s.current?n!=null&&n.id&&s.current!==(n==null?void 0:n.id)&&h(void 0,void 0,void 0,function*(){if(o.current)try{x.d("detaching because different track is passed"),yield c.detachVideo(s.current,o.current)}catch(a){x.w("detach video error for track",s.current,a)}s.current=n==null?void 0:n.id}):s.current=n==null?void 0:n.id},[n==null?void 0:n.id,c]),u.useEffect(()=>{h(void 0,void 0,void 0,function*(){n!=null&&n.id&&o.current&&(t!==!1?yield c.attachVideo(n.id,o.current):yield c.detachVideo(n.id,o.current))})},[n,t,c]),u.useEffect(()=>()=>{h(void 0,void 0,void 0,function*(){if(o.current&&n)try{yield c.detachVideo(n.id,o.current)}catch(a){x.w("detach video error for track",n.id,a)}})},[]),{videoRef:m}};function F({peer:i}){const{videoRef:t}=w({trackId:i.videoTrack});return e.jsxs("div",{className:"peer-container",children:[e.jsx("video",{ref:t,className:`peer-videos ${i.isLocal?"local":""}`,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%"}}),e.jsxs("div",{className:"peer-name",children:[i.name," ",i.isLocal?"(You)":"Admin"]})]})}const A=f(e.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic"),H=f(e.jsx("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff"),I=f(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),P=f(e.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),R=f(e.jsx("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff");function O({setShowConference:i,temp:t}){new L,d(j).length,d(b);const o=p(),{isLocalAudioEnabled:n,isLocalVideoEnabled:s,toggleAudio:m,toggleVideo:a}=M(),r=()=>{o.leave(),i(!1)};return e.jsxs("div",{className:"main_control",children:[e.jsxs("div",{className:"main_controls_section",children:[e.jsx("div",{className:"main_controls_button",onClick:m,children:n?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"large"}),e.jsx("span",{className:"button_name",children:"Mute"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:"large"}),e.jsx("span",{className:"button_name",children:"Unmute"})]})}),e.jsx("div",{className:"main_controls_button",onClick:a,children:s?e.jsxs(e.Fragment,{children:[e.jsx(P,{fontSize:"large"}),e.jsx("span",{className:"button_name",children:"Stop Video"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{fontSize:"large"}),e.jsx("span",{className:"button_name",children:"Start Video"})]})})]}),e.jsx("div",{className:"main_controls_section",children:e.jsx("div",{className:"main_controls_button",children:e.jsxs(e.Fragment,{children:[e.jsx(I,{fontSize:"large",onClick:()=>r()}),e.jsx("span",{className:"button_name",children:"End Call"})]})})})]})}function J({setShowConference:i,temp:t}){d(b),p();const c=d(j);return e.jsx(e.Fragment,{children:e.jsxs(S,{fluid:!0,className:"bg-white py-2 rounded-4 p-0",children:[e.jsx("div",{className:"d-flex respoChildFooter",children:e.jsx("div",{className:"conference-section",children:e.jsx("div",{className:"peers-container",children:c.map(o=>e.jsx(F,{peer:o},o.id))})})}),e.jsx(O,{setShowConference:i,temp:t})]})})}export{J as default};
