import{r as a,y as D,j as e,b as f}from"./index-CZLZpOaH.js";import{S as h}from"./react-select.esm-DWB7Uees.js";import{C as v}from"./common.constants-BAKO8LyS.js";import{C as V}from"./Container-D9at3elR.js";import{R as y}from"./Row-q1SNRrbp.js";import{F as o}from"./Form-ExWjSL5Y.js";import{C}from"./Col-BflThe67.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./assertThisInitialized-B9jnkVVz.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";function re(w){const[S,g]=a.useState(null),[d,b]=a.useState([]),[E,L]=a.useState(!1),[G,M]=a.useState(!1);a.useState("pay1"),a.useState("payinner1"),a.useState("payinners1");const[l,H]=a.useState(w.location.state),[j,R]=a.useState([]),[I,k]=a.useState(null);a.useState();const u=D();a.useState({id:"",senderCountryId:"",recieverCountryIds:[]});const[c,F]=a.useState(void 0),[n,O]=a.useState([]),B=async s=>{try{const t=await f.get(v.BASE_URL+"/getcountries");if(t.data.status===!0){const r=t.data.data.map(x=>({value:x.id,label:x.name}));O(r)}else t.data.status}catch{}},P=s=>{console.log(s),g(s.value)},N=s=>{const t=s.map(r=>r.value);b(t)},U=s=>!!s,A=async()=>{const s=U(S),t=d.length>0;if(L(!s),M(!t),s&&t){const r={senderCountryId:S,recieverCountryIds:d};(await f.post(`${v.BASE_URL}/saveupdatecountrysettings`,r)).data.status==!0?u("/country-settings-list"):u("/country-settings")}},_=async()=>{try{const t=await f.post(`${v.BASE_URL}/getcountrysettingsbyid`,{id:l});g(t.data.data.senderCountryId),b(t.data.data.recieverCountryIds),k(t.data.data.senderCountryId),R(t.data.data.recieverCountryIds);var s=t.data.data.senderCountryId}catch(t){console.log(t)}},i=[];j.length>0&&l&&j.forEach(s=>{const t=n.find(r=>r.value==s);t&&i.push(t)}),a.useEffect(()=>{B(),l&&_()},[]);const m=()=>{c!==void 0&&F(void 0)},$=()=>{u("/country-settings-list")};var p=[n[0]];return I!=null&&(p=n.find(s=>s.value==I)),e.jsx(e.Fragment,{children:e.jsx("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx(V,{children:e.jsx("div",{className:"mainBoxService mt-5",children:e.jsxs("div",{className:"serviceHeader bg-white text-white rounded-2",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Country Settings"}),e.jsx("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:e.jsxs(V,{className:"",children:[e.jsx(y,{className:"mb-4",children:p!=null&&e.jsxs(o.Group,{as:C,controlId:"formGridState",children:[e.jsx(o.Label,{children:"Sender"}),e.jsx(h,{defaultValue:p,menuIsOpen:c,name:"senderCountryId",options:n,className:"basic-multi-select",classNamePrefix:"select",closeMenuOnSelect:!0,onChange:P,onMenuOpen:m}),E&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please select a Sender."})]})}),e.jsx(y,{className:"mb-4",children:l&&i.length>0?e.jsxs(e.Fragment,{children:[console.log(i),e.jsxs(o.Group,{as:C,controlId:"formGridState",children:[e.jsx(o.Label,{children:"Receiver"}),e.jsx(h,{defaultValue:i,isMulti:!0,menuIsOpen:c,name:"recieverCountryIds",options:n,className:"basic-multi-select",classNamePrefix:"select",closeMenuOnSelect:!1,onChange:N,onMenuOpen:m})]})]}):e.jsxs(o.Group,{as:C,controlId:"formGridState",children:[e.jsx(o.Label,{children:"Receiver"}),e.jsx(h,{defaultValue:n[0],isMulti:!0,menuIsOpen:c,name:"recieverCountryIds",options:n,className:"basic-multi-select",classNamePrefix:"select",closeMenuOnSelect:!1,onChange:N,onMenuOpen:m}),G&&!d.length&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please select a receiver."})]})}),e.jsx(y,{children:e.jsxs("div",{className:"row d-flex m-auto mt-3",children:[e.jsxs("a",{className:"purpleBackground btn btn-default text-white bolder d-block w-auto",onClick:A,children:[" ",l?"Update":"Create"]}),"  ",e.jsx("a",{className:"btn btn-default ms-3 text-black bolder border 2 w-auto",onClick:$,children:" Cancel"})]})})]})})]})})})})})}export{re as default};
