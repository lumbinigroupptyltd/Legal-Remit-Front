import{y as he,r as s,b as m,j as e}from"./index-CZLZpOaH.js";import{S as pe}from"./react-select.esm-DWB7Uees.js";import{C as i}from"./common.constants-BAKO8LyS.js";import{C as D}from"./Container-D9at3elR.js";import{F as r}from"./Form-ExWjSL5Y.js";import{R as u}from"./Row-q1SNRrbp.js";import{C as l}from"./Col-BflThe67.js";import{M as c}from"./Modal-CsKgPfCY.js";import{B as j}from"./Button-BsmK-xwD.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./assertThisInitialized-B9jnkVVz.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./divWithClassName-BYsY4_Vt.js";import"./Button-wtvkehlk.js";function et(f){const p=he(),[b,E]=s.useState([]);s.useState(!0),s.useState();const[C,S]=s.useState(!1),[v,I]=s.useState(!1),[R,U]=s.useState(),[M,_]=s.useState(!1),[N,w]=s.useState(!1),P=()=>S(!1),k=()=>I(!1),[F,G]=s.useState(null),O=a=>{G(a.target.value)},H=async()=>{const a={name:F};await m.post(`${i.BASE_URL}/addpaymentname`,a),S(!1)},q=a=>{const t=a.target.checked;w(t)};s.useEffect(()=>{T(),J(),X()},[C,v]);const T=async a=>{try{const t=await m.get(i.BASE_URL+"/getallcountries");t.data.status===!0?E(t.data.data):t.data.status}catch(t){console.log(t)}},[B,z]=s.useState(),V=a=>{const{name:t,value:o}=a.target;z(parseInt(o)),y({...n,[t]:parseInt(o)})},[x,$]=s.useState([]),[h,ue]=s.useState(f.location.state),J=async()=>{try{let a=await m.get(i.BASE_URL+"/getallpaymentmethodname");$(a.data.data)}catch(a){console.log(a)}},[xe,K]=s.useState(""),[n,y]=s.useState({id:"",paymentNameId:"",logo:"",countryId:[],enabled:"",isCustomized:!1}),[L,Q]=s.useState(""),W=a=>{const{name:t,value:o}=a.target;K(o),Q(a.target.options[a.target.selectedIndex].text),y({...n,[t]:parseInt(o)}),U(o)},X=async()=>{try{const a={id:f.location.state},t=await m.post(i.BASE_URL+"/getpaymentmethodbyid",a);t.data.status===!0?(y(t.data.data),w(t.data.data.enabled)):t.data.status==="error"&&console.log(t.data.message)}catch(a){console.log(a)}},[Y,Z]=s.useState(""),ee=a=>{const{name:t,value:o}=a.target;Z(o)},te=async a=>{try{const t={id:Y},o=await m.post(i.BASE_URL+"/deletepaymentmethodnamebyid",t);I(!1),p("/create-payment-methods")}catch(t){console.log(t)}},ae=()=>{p("/payment-methods")},se=async()=>{var t;if(h){const o={id:n.id,paymentNameId:n.paymentNameId,countryId:n.countryId,enabled:N,logo:n.logo};m.post(i.BASE_URL+"/updatepaymentmethod",o).then(d=>{d.data.status==!0?p("/payment-methods"):p("/create-payment-methods"),console.log(d)}).catch(d=>console.log(d))}else{var a=(t=(await m.post(i.BASE_URL+"/getpaymentnamebyid",{id:R})).data.data)==null?void 0:t.logo;if(!n.paymentNameId||n.countryId.length===0)_(!0);else{const d=require("form-data");new d;const ie={paymentNameId:n.paymentNameId,logo:a,countryId:n.countryId,enabled:N,isCustomized:!0};m.post(i.BASE_URL+"/addpaymentmethod",ie,{headers:{"Content-Type":"application/json"}}).then(g=>{g.data.statuscode==200&&p("/payment-methods")}).catch(g=>{console.error(g)})}}},[ye,ne]=s.useState(""),oe=a=>{Array.isArray(a)&&(ne(a.map(t=>t.value)),y({...n,countryId:a.map(t=>t.value)}))},[A,re]=s.useState(void 0),le=()=>{A!==void 0&&re(void 0),me()},[ce,de]=s.useState([]),me=async a=>{try{const t=await m.get(i.BASE_URL+"/getallcountries");if(t.data.status===!0){const o=t.data.data.map(d=>({value:d.id,label:d.name}));de(o)}else t.data.status}catch(t){console.log(t)}};return e.jsx(e.Fragment,{children:e.jsxs("section",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[e.jsx(D,{children:e.jsx("div",{className:"mainBoxService mt-5",children:e.jsxs("div",{className:"serviceHeader bg-white text-black rounded-2",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Payment Methods"}),e.jsx("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:e.jsx(D,{className:"",children:e.jsxs(r,{id:"paymentCheck",children:[e.jsx(u,{className:"mb-4",children:e.jsxs(r.Group,{as:l,controlId:"formGridState",children:[e.jsx(r.Label,{children:"Country"}),h?e.jsxs(r.Select,{value:n&&n.countryId?[n.countryId]:B!==void 0?[B]:"14",onChange:V,name:"countryId",disabled:h,className:"required",id:"abc",children:[e.jsx("option",{value:"",children:"Select Country"}),b&&b.map((a,t)=>e.jsxs("option",{value:a.id,children:[a.emoji,"  ",a.name]},t))]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{isMulti:!0,menuIsOpen:A,name:"countryId",options:ce,className:"basic-multi-select",classNamePrefix:"select",closeMenuOnSelect:!1,onChange:oe,onMenuOpen:le}),M&&n.countryId.length===0&&e.jsx("small",{className:"text-danger error_message ms-2 error",children:"Please select country"})]})]})}),e.jsx(u,{className:"mb-4 d-flex",children:e.jsxs(r.Group,{as:l,className:"",controlId:"formGridCity",children:[e.jsx(r.Label,{children:" Name"}),e.jsx("div",{className:"d-flex methodName1",children:e.jsxs(l,{className:"col-lg-12 px-0",children:[e.jsxs(r.Select,{value:n?n.paymentNameId:L,onChange:W,name:"paymentNameId",disabled:h,className:"required",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),x&&x.map((a,t)=>e.jsx("option",{value:a.id,children:a.name},t))]}),M&&!(n.paymentNameId||L)&&e.jsx("small",{className:"responsiveFontLarge text-danger error_message ms-2 error",children:"Please select payment method"})]})})]})}),e.jsx(u,{className:"mb-4",children:e.jsxs("div",{className:"mt-3 d-flex",children:[e.jsx("input",{type:"checkbox",id:"vehicle1",name:"enabled",value:"true",className:"main-radio requiredCheckBox",onChange:q,checked:N}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Active"})]})}),e.jsxs("div",{className:"row d-flex m-auto pt-3 border-top",children:[e.jsxs("a",{className:"purpleBackground btn btn-default text-white bolder mx-1 w-auto",onClick:se,children:[" ",h?"Update":"Create"]}),e.jsx("a",{className:"btn btn-default text-black bolder border 2 mx-1 w-auto",onClick:ae,children:" Cancel"})]})]})})})]})})}),e.jsxs(c,{show:C,centered:!0,children:[e.jsx(c.Header,{onHide:P,closeButton:!0,children:e.jsx(c.Title,{className:"p-0 m-0"})}),e.jsxs(c.Body,{children:[e.jsx("h3",{className:"bolder text-center",children:"Add New Payment Method"}),e.jsx("br",{}),e.jsx(r.Group,{as:l,className:"",controlId:"formGridCity",children:e.jsxs(l,{className:"px-0",children:[e.jsx(r.Label,{className:"fs-5",children:" Name "}),e.jsx(r.Control,{className:"fs-5",id:"PaymentName",onChange:O})]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(u,{className:"justify-content-center",children:[e.jsx(l,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(j,{variant:"primary",className:"w-75 py-3",onClick:H,children:"Save New Method"})}),e.jsx(l,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(j,{variant:"secondary",className:"btn btn-default ms-3 text-black bolder border 2",onClick:P,children:"Cancel Method"})})]})]}),e.jsx(c.Footer,{})]}),e.jsxs(c,{show:v,centered:!0,children:[e.jsx(c.Header,{onHide:k,closeButton:!0,children:e.jsx(c.Title,{className:"p-0 m-0"})}),e.jsxs(c.Body,{children:[e.jsx("h3",{className:"bolder text-center",children:"Delete Payment Method Name"}),e.jsx("br",{}),e.jsx(l,{className:"col-lg-11 px-0",children:e.jsxs(r.Select,{onChange:ee,name:"paymentMethodName",disabled:h,children:[e.jsx("option",{children:"Select Payment Method Name"}),x&&x.map((a,t)=>e.jsx("option",{value:a.id,children:a.name},t))]})}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(u,{className:"justify-content-center",children:[e.jsx(l,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(j,{variant:"primary",className:"w-75 py-3",onClick:te,children:"Delete"})}),e.jsx(l,{className:"col-lg-5 px-0 justify-content-center d-flex",children:e.jsx(j,{variant:"secondary",className:"btn btn-default ms-3 text-black bolder border 2",onClick:k,children:"Cancel"})})]})]}),e.jsx(c.Footer,{})]})]})})}export{et as default};
