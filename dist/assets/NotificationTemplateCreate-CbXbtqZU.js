import{r as o,y as te,b as g,j as e}from"./index-CZLZpOaH.js";import"./PageHeader-6CScOhCz.js";import{D as c,r as ae}from"./react-draft-wysiwyg-DGDLocOJ.js";import"./jodit-react-DkS4Tuh2.js";import{C as x}from"./common.constants-BAKO8LyS.js";import{M}from"./ModalComponent-Can9sfzz.js";import{L as oe}from"./Loader-BUXOLHKX.js";import{F as i}from"./Form-ExWjSL5Y.js";import"./DashbordData-n50t2wKP.js";import"./Modal-CsKgPfCY.js";import"./ThemeProvider-BovkV_tw.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./index-tz1zYP65.js";import"./divWithClassName-BYsY4_Vt.js";import"./ElementChildren-DV238mrs.js";import"./Col-BflThe67.js";const se={options:["inline","blockType","list","textAlign","history","fontFamily","colorPicker","emoji"],inline:{inDropdown:!1,options:["bold","italic","underline","strikethrough"]},colorPicker:{className:void 0,component:void 0,popupClassName:void 0,colors:["rgb(97,189,109)","rgb(26,188,156)","rgb(84,172,210)","rgb(44,130,201)","rgb(147,101,184)","rgb(71,85,119)","rgb(204,204,204)","rgb(65,168,95)","rgb(0,168,133)","rgb(61,142,185)","rgb(41,105,176)","rgb(85,57,130)","rgb(40,50,78)","rgb(0,0,0)","rgb(247,218,100)","rgb(251,160,38)","rgb(235,107,86)","rgb(226,80,65)","rgb(163,143,132)","rgb(239,239,239)","rgb(255,255,255)","rgb(250,197,28)","rgb(243,121,52)","rgb(209,72,65)","rgb(184,49,47)","rgb(124,112,107)","rgb(209,213,216)"]},emoji:{className:void 0,component:void 0,popupClassName:void 0,emojis:["😀","😁","😂","😃","😉","😋","😎","😍","😗","🤗","🤔","😣","😫","😴","😌","🤓","😛","😜","😠","😇","😷","😈","👻","😺","😸","😹","😻","😼","😽","🙀","🙈","🙉","🙊","👼","👮","🕵","💂","👳","🎅","👸","👰","👲","🙍","🙇","🚶","🏃","💃","⛷","🏂","🏌","🏄","🚣","🏊","⛹","🏋","🚴","👫","💪","👈","👉","👉","👆","🖕","👇","🖖","🤘","🖐","👌","👍","👎","✊","👊","👏","🙌","🙏","🐵","🐶","🐇","🐥","🐸","🐌","🐛","🐜","🐝","🍉","🍄","🍔","🍤","🍨","🍪","🎂","🍰","🍾","🍷","🍸","🍺","🌍","🚑","⏰","🌙","🌝","🌞","⭐","🌟","🌠","🌨","🌩","⛄","🔥","🎄","🎈","🎉","🎊","🎁","🎗","🏀","🏈","🎲","🔇","🔈","📣","🔔","🎵","🎷","💰","🖊","📅","✅","❎","💯"]},list:{inDropdown:!0,options:["unordered","ordered"]},fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],className:void 0,component:void 0,dropdownClassName:void 0},textAlign:{inDropdown:!0,options:["left","center","right","justify"]},link:{inDropdown:!1,showOpenOptionOnHover:!1,defaultTargetOption:"_blank"},history:{inDropdown:!1,options:["undo","redo"]}};function Ie(S){const[d,m]=o.useState(""),[ie,P]=o.useState(""),[b,f]=o.useState(!1),[v,k]=o.useState(S.location.state),[q,H]=o.useState(null),[I,y]=o.useState(!1),[K,w]=o.useState(!1),[O,r]=o.useState(!1),[E,A]=o.useState(""),[C,u]=o.useState(c.EditorState.createEmpty()),[T,B]=o.useState(!1),[l,D]=o.useState("");o.useState({});const[j,L]=o.useState(!1),[N,R]=o.useState(!1),[U,G]=o.useState(""),V=a=>{D(a.target.value);let t=a.target.value;_(t)},_=async a=>{var t,s;try{const p={category:a.toString()},n=await g.post(x.BASE_URL+"/getnotificationbycategory",p);if(((t=n==null?void 0:n.data)==null?void 0:t.status)===!0&&((s=n==null?void 0:n.data)!=null&&s.data)){k(n.data.data.id);const{title:X,description:ee}=n.data.data;m(X),u(c.EditorState.createWithContent(c.ContentState.createFromBlockArray(c.convertFromHTML(ee))))}else k(null),m(null),u(c.EditorState.createEmpty())}catch(p){console.log(p)}};o.useRef("");const h=te();o.useEffect(()=>{H(S.location.state),W()},[]);const W=async()=>{r(!0);const a={id:v};await g.post(`${x.BASE_URL}/getnotificationbyid`,a).then(t=>{m(t.data.data.title),D(t.data.data.category),f(t.data.data.isEnabled),L(t.data.data.isTransaction),R(t.data.data.isKyc),r(!1);const s=t.data.data.description,p=c.convertFromRaw({entityMap:{},blocks:[{text:s,type:"unstyled",entityRanges:[]}]}),n=c.EditorState.createWithContent(p);u(n),A(n.getCurrentContent().getPlainText())}).catch(t=>{console.log("err",t),r(!1)})},$=a=>{u(a),A(a.getCurrentContent().getPlainText())},z=async()=>{if(l==null||l=="")B(!0);else if(d==null)B(!0);else if(v)F();else{r(!0);const a=C.getCurrentContent().getPlainText(),t={category:l,title:d,description:E||a,enabled:b,isTransaction:j,isKyc:N};await g.post(`${x.BASE_URL}/addnotificationtemplate`,t).then(s=>{y(!0),h("/notification-template")}).catch(s=>{console.log("err",s)}).finally(()=>{r(!1)})}},F=async()=>{r(!0);const a=C.getCurrentContent().getPlainText(),t={id:v,category:l,title:d,description:E||a,enabled:b,isTransaction:j,isKyc:N};await g.post(`${x.BASE_URL}/updatenotificationtemplates`,t).then(s=>{m(s.data.data.title),P(s.data.data.description),f(s.data.data.isEnabled),y(!0),h("/notification-template"),r(!1)}).catch(s=>{console.log("err",s),r(!1)})},Z=a=>{const t=a.target.checked;R(t)},Y=a=>{const t=a.target.checked;L(t)},J=a=>{const t=a.target.checked;f(t)},Q=["Account Created","Account Closed","Account Deleted","Send Otp","Forgot Password","Verified Email","Register Email","Transaction notify","Transaction submitted","Transaction refund","Transaction cancel","Additional Document request","Report of Fraud","Support","Refund Request","Birthday Notification","Request Document","Contact Us"];return e.jsx("div",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx("div",{children:e.jsxs("div",{className:"container-fluid",children:[O==!0?e.jsx(oe,{}):"",e.jsx("div",{className:"mainBoxService mt-5",children:e.jsxs("div",{className:"serviceHeader bg-white text-black rounded-2",children:[e.jsx("h3",{className:"text-black px-4 mx-2  normal  border-bottom  pt-4 pb-3 pb-2 responsiveFontLargeMedium ",children:"Notification Template"}),e.jsxs("div",{className:"mainBoxService-Body bg-white text-black pe-4 ps-4 py-4",children:[e.jsxs(i,{id:"notificationCheck",children:[e.jsxs(i.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(i.Label,{children:"Category"}),e.jsxs(i.Select,{value:l,onChange:V,children:[e.jsx("option",{value:"",children:"Select an option"}),Q.map((a,t)=>e.jsx("option",{value:a,children:a},t))]}),T&&!l&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please select category"})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(i.Label,{children:"Title"}),e.jsx(i.Control,{type:"text",placeholder:"",value:d,className:"required",onChange:a=>{const t=a.target.value.replace(/[^A-Za-z\s]/g,"");m(t)}}),T&&!d&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please enter title"})]}),e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Description"}),e.jsx(ae.Editor,{editorState:C,wrapperClassName:"email-editor-wrapper",editorClassName:"email-editor-content",onEditorStateChange:$,toolbar:se})]}),e.jsxs(i.Group,{className:"mb-3 mt-3",controlId:"formBasicEmail",children:[e.jsx(i.Label,{children:"Push Body Message"}),e.jsx(i.Control,{type:"text",placeholder:"",value:U,onChange:a=>{const s=a.target.value.replace(/[^A-Za-z\s]/g,"");G(s)}})]}),e.jsxs("div",{className:"mt-3 d-flex",children:[e.jsx("input",{type:"checkbox",id:"vehicle1",name:"isActive",value:"true",className:"main-radio requiredCheckBox",onChange:J,checked:b}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Active"})]}),e.jsxs("div",{className:"mt-3 d-flex",children:[e.jsx("input",{type:"checkbox",id:"vehicle1",name:"isTransaction",value:"true",className:"main-radio requiredCheckBox",onChange:Y,checked:j}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"Transaction"})]}),e.jsxs("div",{className:"mt-3 d-flex",children:[e.jsx("input",{type:"checkbox",id:"vehicle1",name:"isKyc",value:"true",className:"main-radio requiredCheckBox",onChange:Z,checked:N}),e.jsx("label",{for:"vehicle1",className:"ms-2",children:"KYC"})]}),q==!0?e.jsxs("div",{className:"d-flex my-3",children:[e.jsx("div",{onClick:()=>{z()},style:{background:"#AA2AE1",width:"auto"},className:"rounded btn text-white bolder px-3",children:"Create"}),e.jsx("div",{className:"",children:e.jsx("a",{className:"btn btn-default text-black bolder border 2 mx-2",onClick:()=>h("/notification-template"),children:" Cancel"})})]}):e.jsxs("div",{className:"row d-flex m-auto mt-3",children:[e.jsx("div",{className:"col-lg-2 pb-4 ps-0",children:e.jsx("div",{onClick:()=>{F(),w(!0)},style:{background:"#AA2AE1",width:"100%"},className:"rounded btn text-white bolder",children:"Update"})}),e.jsx("div",{className:"col-lg-2 pb-4 ps-0",children:e.jsx("a",{className:"btn btn-default ms-3 text-black bolder border 2",onClick:()=>h("/notification-template"),children:" Cancel"})})]})]}),e.jsx(M,{show:K,title11:"Notification Template updated successfully",onHide:()=>w(!1)}),e.jsx(M,{show:I,title1:"Notification Template added successfully",onHide:()=>y(!1)})]})]})})]})})})}export{Ie as default};
