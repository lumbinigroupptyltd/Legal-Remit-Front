import{r as s,R as b,b as h,j as e}from"./index-CZLZpOaH.js";import{P as Q}from"./PageHeader-6CScOhCz.js";import{C as c}from"./common.constants-BAKO8LyS.js";import{M as Y}from"./ModalComponent-Can9sfzz.js";import{M as ee}from"./ModalComponentPopup-D_u4dGYC.js";import{N as te}from"./NoRecordWithAddBtn-DmeiGlWH.js";import{N as ae}from"./NoRecord-YEWFTOK2.js";import{F as v}from"./Form-ExWjSL5Y.js";import{P as se}from"./Pagination-DBwceeB_.js";import{M as oe}from"./Modal-CsKgPfCY.js";import{C as re}from"./Col-BflThe67.js";import"./DashbordData-n50t2wKP.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./useControlled-CSwFU9cf.js";import"./ButtonBase-Dp3TaUiU.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./assertThisInitialized-B9jnkVVz.js";import"./TransitionGroupContext-QmIPOmoK.js";import"./listen-DOhMskc_.js";import"./useWindow-BRfE8g8U.js";import"./useEventCallback-BAoW58St.js";import"./useMergedRefs-CC2NoeT3.js";import"./useWillUnmount-B2faAFH4.js";import"./TransitionWrapper-hzIxZzZF.js";import"./Transition-yovTjeQN.js";import"./useMounted-_Ax2eNue.js";import"./usePrevious-DSHR52O9.js";import"./DataKey-COGXBUcQ.js";import"./ImperativeTransition-r3w4KPGy.js";import"./useIsomorphicEffect-Dy1EPX0O.js";import"./NoopTransition-DCT8I71y.js";import"./removeClass-loOrDRrx.js";import"./hasClass-D5ZjVvBY.js";import"./Fade-C3nPY4By.js";import"./CloseButton-BaMgJgcS.js";import"./divWithClassName-BYsY4_Vt.js";function qe(){const[P,n]=s.useState(!1),[E,y]=s.useState(!1),[r,k]=s.useState([]),[A,B]=s.useState(!0),[C,x]=s.useState(!1),[m,_]=s.useState(""),[i,u]=b.useState(1),[d,M]=b.useState(c.DefaultPageSize),[f,D]=b.useState(0),[F,L]=b.useState(0),[T,N]=s.useState(!1),[U,I]=s.useState(0),[H,w]=s.useState(!1),[l,S]=s.useState(""),[z,R]=s.useState(!1);s.useEffect(t=>{j()},[m,i,d]);const $=async t=>{N(!0),I(t)},G=()=>{N(!1)},V=t=>{M(Number(t.target.value)),u(1)},W=(t,a)=>{a==i,u(a)},j=async t=>{var a,o;x(!1);try{const g={pageindex:i,pagesize:d,searchdata:"%"+m+"%",sortparam:"create_at",sortorder:"ASC"},p=await h.post(c.BASE_URL+"/getallrelations",g);p.data.status===!0&&(k((a=p.data)==null?void 0:a.data),L((o=p.data)==null?void 0:o.totalPageCount),D(p.data.recordCount),R(p.data.recordCount==0?m!="":!0))}catch(g){console.log(g)}},X=async()=>{N(!1);try{const t={id:U};(await h.post(c.BASE_URL+"/deleterelationsbyid",t)).data.status===!0&&(y(!0),j())}catch(t){console.log(t)}},Z=async t=>{try{const a={id:t},o=await h.post(c.BASE_URL+"/getrelationsbyid",a);o.data.status===!0&&(x(!0),B(o.data.data),S(o.data.data.name),n(!0))}catch(a){console.log(a)}},q=async t=>{try{if(l===""||l===void 0)w(!0);else{const a=document.getElementById("relation-msg").value,o={id:A.id,name:a!==""?a:l};(await h.post(c.BASE_URL+"/updaterelations",o)).data.status===!0&&(n(!1),j())}}catch(a){console.log(a)}},J=async t=>{x(!1),n(!0);try{if(l==""||l==null)w(!0);else{const a={name:l};(await h.post(c.BASE_URL+"/addrelations",a)).data.status===!0&&(n(!1),j())}}catch(a){console.log(a)}},K=t=>{const a=t.target.value;_(a),u(1),R(r.length>0||a.trim()!=="")},O=()=>{x(!1),n(!0),S("")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>{document.body.classList.remove("offcanvas-active")},children:e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col col-lg-6 ",children:e.jsx(Q,{HeaderText:"Relation",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]})}),e.jsx("div",{className:"col col-lg-6 "})]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"body project_report",children:e.jsxs("div",{className:"table-responsive",children:[e.jsx("div",{className:"row g-0",children:e.jsx("div",{className:" d-flex justify-content-end"})}),e.jsx("div",{className:"row"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center respoChildFooter",children:[r&&r.length>0&&e.jsxs("div",{className:"filter-row pb-2 pbSt",children:["Show Entries    ",e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(v.Select,{name:"tbl_meeting_length",onChange:V,value:d,"aria-controls":"tbl_meeting",className:"form-control-sm py-2 h-auto  ps-3 mt-1",children:c.show_rows.map(t=>e.jsx("option",{value:t,children:t}))})})]}),e.jsxs("div",{className:"d-flex pbSt align-items-center respoChildFooter",children:[z&&e.jsxs("div",{className:"form-group d-flex align-items-center mb-0",children:[e.jsx("label",{className:"font-weight-normal mb-0",children:"Search: "}),"   ",e.jsx("input",{type:"search",id:"search",className:"form-control p-0 px-3",placeholder:"",onChange:K})]}),"   ",r&&r.length>=0&&m===""&&e.jsxs("a",{className:"purpleBackground btn btn-default text-white bolder",onClick:t=>O(),children:[e.jsx("i",{className:"text-white fa fa-plus bolder"})," Add New"]})]})]}),r&&r.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"table m-b-0 ",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Relation"}),e.jsx("th",{className:"text-end ms-4 pe-5 ",children:"Actions"})]})}),r.map((t,a)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsxs("td",{className:"project-actions d-flex justify-content-end border-0",children:[e.jsx("a",{className:"bg-transparent  px-3 py-2 rounded-2 border-1 border pointer border-black",onClick:o=>Z(t.id),children:e.jsx("i",{className:"fa fa-edit ",title:"Edit"})})," "," ",e.jsx("a",{className:"bg-transparent  px-3 py-2 rounded-2 border-1 border pointer border-black",onClick:o=>$(t.id),children:e.jsx("i",{className:"fa fa-trash",style:{color:"red"},title:"Delete"})})]})]})}))]})}):m===""?e.jsx(ae,{}):e.jsx(te,{}),r&&r.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2",children:f>0?`Showing ${(i-1)*d+1} to ${i*d>f?f:i*d} of ${f} entries`:"No records Available"}),e.jsx(se,{count:F,className:"pbDowSt pbSt",page:i,onChange:W,color:"secondary",shape:"rounded"})]})]})})})})})]})})})}),e.jsxs(oe,{className:"rounded",show:P,onHide:t=>n(!1),size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx("div",{className:"d-flex px-3  flex-column py-4 pb-0 d-flex border-bottom",children:C==!1?e.jsx("h4",{className:"purpleText px-3",children:"Add Relation"}):e.jsx("h4",{className:"purpleText px-3",children:"Update Relation"})}),e.jsx("div",{className:"d-flex px-3 flex-column py-4",children:e.jsxs(v.Group,{as:re,className:"left-inner-addon  input-container",children:[e.jsx("i",{className:"purpleText main fa fa-pen "}),e.jsx(v.Control,{type:"text",placeholder:"Relation",className:"form-input formControlStep2",value:l,id:"relation-msg",onChange:t=>{const a=t.target.value.replace(/[^A-Za-z\s]+/g,"");S(a)}}),H&&!l&&e.jsx("small",{className:"responsiveFontLarge  text-danger",children:"Please Enter Relation Name"})]})}),e.jsxs("div",{className:"row d-flex px-3 mx-1",children:[e.jsx("div",{className:"col col-lg-4",children:C==!1?e.jsx("button",{className:"success-btn purpleBackground border-0 rounded text-light",onClick:t=>J(),children:"Create"}):e.jsx("button",{className:"success-btn purpleBackground border-0 rounded text-light",onClick:t=>q(),children:"Update"})}),e.jsx("div",{className:"col col-lg-4",children:e.jsx("button",{className:"btn btn-default border text-black rounded",onClick:t=>n(!1),children:"Cancel"})})]}),e.jsx("br",{})]}),e.jsx(Y,{show:E,title11:"Deleted successfully",onHide:()=>y(!1)}),e.jsx(ee,{show:T,title1:"Are you sure want to delete this record ?",cancle:t=>G(),SavePr:()=>X()})]})}export{qe as default};
