import{r as t,R as v,y as se,j as e,ao as ae,b as te}from"./index-CZLZpOaH.js";import{P as re}from"./PageHeader-6CScOhCz.js";import{C}from"./common.constants-BAKO8LyS.js";import{h as k}from"./moment-CAEcp8GN.js";import{d as ne,a as oe}from"./Android-xQs9HrEm.js";import{N as le}from"./NoRecordWithAddBtn-DmeiGlWH.js";import{L as ie}from"./Loader-BUXOLHKX.js";import{C as y}from"./Col-BflThe67.js";import{F as o}from"./Form-ExWjSL5Y.js";import{B as F}from"./Button-BsmK-xwD.js";import{T as ce}from"./Table-AlyK2NrT.js";import{P as de}from"./Pagination-DBwceeB_.js";import"./DashbordData-n50t2wKP.js";import"./createSvgIcon-BXb30exD.js";import"./createSvgIcon-CvFBLNCx.js";import"./emotion-react.browser.esm-CGVHAuF1.js";import"./hoist-non-react-statics.cjs-B8tJyPPZ.js";import"./emotion-is-prop-valid.esm-BquxX9m-.js";import"./ownerWindow-B35kT-qP.js";import"./useId-BCOK0MJf.js";import"./useIsFocusVisible-CYy9vjXn.js";import"./useControlled-CSwFU9cf.js";import"./ThemeProvider-BovkV_tw.js";import"./index-tz1zYP65.js";import"./ElementChildren-DV238mrs.js";import"./Button-wtvkehlk.js";import"./ButtonBase-Dp3TaUiU.js";import"./assertThisInitialized-B9jnkVVz.js";import"./TransitionGroupContext-QmIPOmoK.js";function _e({}){const[r,R]=t.useState([]),[me,T]=t.useState(),[i,D]=t.useState(""),[c,I]=t.useState(""),[d,w]=t.useState(0),[m,A]=t.useState(""),[n,g]=v.useState(1),[u,B]=v.useState(C.DefaultPageSize),[W,E]=v.useState(0),[x,V]=v.useState(0),[S,$]=t.useState(0);t.useState(!1);const[z,P]=t.useState(!1);se();const L=()=>{h(1,50,"",0,0,""),I(""),D(0),w(0),A("")},_=s=>{const a=s.target.value;D(a)},h=async(s,a,j,l,p,J)=>{P(!0);const K={pageindex:s,pagesize:a,device:j,userId:l==""?0:l,roleid:p,searchdata:J,sortparam:"created_at",sortorder:"DESC"},N=await te.post(C.BASE_URL+"/getalldeviceInfos",K),f=N.data.data;R(f),E(N.data.totalPageCount),V(N.data.recordCount);const Q=f==null?void 0:f.createdAt,Y=new Date(Q),Z=new Date-Y,b=Math.floor(Z/(1e3*60*60*24)),ee=b<1?"Today":b===1?"1 day ago":`${b} days ago`;T(ee),$(a),P(!1)},U=s=>{const a=k(),j=k(s),l=a.diff(j,"minutes"),p=a.diff(j,"days");return l<1?"Less than 1 minute ago":l<60?`${l} minutes ago`:p<1?"Today":p===1?"1 day ago":`${p} days ago`},q=s=>{B(Number(s.target.value)),g(1)},M=s=>{I(s.target.value)},H=s=>{h(n,u,c,i,d,m)},O=(s,a)=>{a==n,g(a),h(a,u,c,i,d,m)},G=s=>{const a=s.target.value;A(a)},X=s=>{w(s.target.value)};return t.useEffect(()=>{h(n,u,c,i,d,m)},[]),e.jsxs("div",{className:"container-fluid",onClick:()=>{document.body.classList.remove("offcanvas-active")},children:[z==!0?e.jsx(ie,{}):"",e.jsx(re,{HeaderText:"Device and IP Info",Breadcrumb:[{name:"Dashboard",navigate:""},{name:"IoT Dashboard",navigate:""}]}),e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"deviceMainTable",children:e.jsx("div",{className:"row clearfix",children:e.jsx("div",{className:"col-lg-12 col-md-12 p-0",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"body project_report px-0",children:[e.jsxs("div",{className:"table-responsive1",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:" overflow-hidden",children:e.jsxs(y,{className:"col-lg-12 d-flex px-3 justify-content-end  respoChildFooter",children:[e.jsxs("div",{class:"mx-2 WFull me-auto",children:["Show Entries    ",e.jsx("div",{className:"dateSec  ",children:e.jsx(o.Select,{onChange:q,value:u,"aria-label":"Default select example",className:"d-flex m-auto selectContainer form-select-zz pe-5",name:"device",children:C.show_rows.map(s=>e.jsx("option",{value:s,children:s}))})})]}),e.jsxs("div",{class:"mx-2 WFull me-auto",children:["   ",e.jsx("div",{className:"dateSec ",children:e.jsxs(o.Select,{"aria-label":"Default select example",className:"d-flex m-auto selectContainer form-select-zz pe-5",name:"device",onChange:s=>M(s),value:c,children:[e.jsx("option",{value:"",children:"Any Device"}),e.jsx("option",{value:"Android",children:"Android"}),e.jsx("option",{value:"IOS",children:"IOS"}),e.jsx("option",{value:"Web",children:"Web"})]})})]}),e.jsxs("div",{class:"mx-2 WFull ps-0 me-auto",children:["   ",e.jsx(o.Group,{as:y,className:" input-container required pb-0 ps-0 pe-0 ",children:e.jsx(o.Control,{type:"number",required:!0,placeholder:"User ID",name:"userId",className:" reflink link py-2 ",onChange:s=>_(s),value:i})})]}),e.jsxs("div",{class:"mx-2 WFull  ps-0 me-auto",children:["   ",e.jsx("div",{className:"dateSec ",children:e.jsxs(o.Select,{"aria-label":"Default select example",className:"d-flex m-auto selectContainer pe-5",name:"rollId",value:d,onChange:s=>X(s),children:[e.jsx("option",{value:0,children:"Role"}),e.jsx("option",{value:1,children:"Admin"}),e.jsx("option",{value:2,children:"Business"}),e.jsx("option",{value:3,children:"Individual"}),e.jsx("option",{value:4,children:"Agent"})]})})]}),e.jsxs("div",{class:"mx-2 WFull ps-0 ",children:["   ",e.jsx(o.Group,{as:y,className:" input-container required pb-0 ps-0 pe-0 ",children:e.jsx(o.Control,{type:"text",required:!0,placeholder:"Search",name:"search",className:" reflink link py-2 ",value:m,onChange:s=>G(s)})})]}),e.jsxs("div",{class:"mx-2 ",children:["   ",e.jsx(F,{className:"m-0  btn btn-default rounded-5 py-2 purpleBackground text-white",onClick:()=>H(),children:"Submit"})]}),e.jsxs("div",{class:"mx-2 ",children:["   ",e.jsx(F,{className:"m-0  btn btn-default rounded-5 py-2 purpleBackground text-white",onClick:L,children:"Clear"})]})]})})}),e.jsx("div",{className:"d-flex justify-content-between align-items-center px-3 respoChildFooter my-4 border-top pt-3"}),r&&(r==null?void 0:r.length)>0?e.jsx("div",{style:{overflowX:"auto"},className:"px-3",children:e.jsxs(ce,{className:"table m-b-0",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Time"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"OS Versions"}),e.jsx("th",{children:"IP"}),e.jsx("th",{children:"App Versions"}),e.jsx("th",{children:"Server Versions"})]})}),e.jsx("tbody",{children:r&&r.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["  ",s.client==="web"?e.jsx(ne,{}):null,s.client==="android"?e.jsx(oe,{}):null," ",e.jsxs(ae,{to:{pathname:"/individualuser",state:s.userId},children:[s.firstName," ",s.lastName]})]}),e.jsx("td",{children:U(s.createdAt)}),e.jsx("td",{children:s.model==""?"-":s.model}),e.jsx("td",{children:s.osVersion==""?"-":s.osVersion}),e.jsx("td",{children:s.ip==""?"-":s.ip}),e.jsx("td",{children:s.appVersion==""?"-":s.appVersion}),e.jsx("td",{className:"word-break",children:s.host==""?"-":s.host})]}))})]})}):e.jsx(le,{})]}),r&&r.length>0&&e.jsxs("div",{className:"d-flex justify-content-between pt-4 mr-4 align-items-center respoChildFooter",children:[e.jsx("div",{className:"filter-row pt-2",children:x>0?`Showing ${(n-1)*S+1} to ${n*S>x?x:n*S} of ${x} entries`:"No records Available"}),e.jsx(de,{count:W,className:"pbDowSt ",page:n,onChange:O,color:"secondary",shape:"rounded"})]})]})})})})})})]})}export{_e as default};
